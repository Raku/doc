=begin pod :tag<convert> :page-order<A01>

=TITLE 5to6-nutshell

=SUBTITLE Perl5åˆ°Perl6åˆæ­¥: æˆ‘æ€ä¹ˆåšæˆ‘ä¹ æƒ¯åšçš„?

æœ¬æ–‡æ¡£å°è¯•å»æä¾›ä» Perl 5åˆ° Perl 6çš„è¯­æ³•ä»¥åŠè¯­ä¹‰ä¸Šçš„å˜åŒ–å¿«é€Ÿã€‚ 
é‚£äº›åœ¨ Perl 5ä¸­æ­£å¸¸å·¥ä½œçš„ï¼Œåœ¨ Perl 6ä¸­å´è¦æ¢ä¸€ç§å†™æ³•çš„è¯­æ³•
åº”è¯¥è¢«åˆ—å‡ºåœ¨è¿™é‡Œï¼ˆè€Œè®¸å¤š Perl 6çš„I<æ–°>ç‰¹æ€§ä»¥åŠé£æ ¼å°±ä¸ä¼šï¼‰ã€‚


å› æ­¤ï¼Œæ¬¡æ–‡æ¡£å¹¶ä¸æ˜¯é’ˆå¯¹ Perl 6åˆå­¦è€…çš„æ‰‹å†Œæˆ–è€…è¿›é˜¶æ–‡ç« ï¼Œå®ƒæ˜¯ä¸º
æœ‰Perl5çŸ¥è¯†èƒŒæ™¯çš„ Perl6 å­¦ä¹ è€…ä»¥åŠç§»æ¤ Perl5 ä»£ç åˆ° Perl6çš„äººå‘˜
å‡†å¤‡çš„æŠ€æœ¯æ–‡æ¡£ï¼ˆè™½ç„¶ L<#Automated Translation>å¯èƒ½ä¼šæ›´æ–¹ä¾¿ä¸€äº›ï¼‰ã€‚

æ³¨æ„ï¼Œå½“æ–‡æ¡£ä¸­æˆ‘ä»¬è¯´â€œç°åœ¨â€æ—¶ï¼Œæ›´å¤šçš„æ„æ€æ˜¯â€œä½ ç°åœ¨æ­£åœ¨å°è¯• Perl 6â€ï¼Œ
å¹¶æ²¡æœ‰æš—ç¤ºè¯´ Perl 5çªç„¶è¿‡ æ—¶äº†ï¼Œæ°æ°ç›¸åï¼Œå¤§å¤šæ•°çš„æˆ‘ä»¬éƒ½æ·±çˆ± Perl 5ï¼Œ
æˆ‘ä»¬å¸Œæœ› Perl 5èƒ½å†ç»§ç»­ä½¿ç”¨å¥½å¤šå¹´ï¼Œäº‹å®ä¸Šï¼Œæˆ‘ä»¬çš„ é‡è¦ç›®æ ‡ä¹‹ä¸€å°±æ˜¯è®©
Perl5å’Œ Perl6ä¹‹é—´é¡ºåˆ©äº¤äº’ã€‚ ä¸è¿‡ï¼Œæˆ‘ä»¬ä¹Ÿå–œæ¬¢ Perl 6çš„è®¾è®¡ç›®æ ‡ï¼Œç›¸æ¯” 
Perl5ä¸­çš„è®¾è®¡ç›®æ ‡ï¼Œæ›´æ–°é¢–ï¼Œæ›´å¥½ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸­çš„å¤§å¤šæ•°äººéƒ½å¸Œæœ›åœ¨
ä¸‹ä¸€ä¸ªåå¹´æˆ–è€…ä¸¤ä¸ªåå¹´ï¼ŒPerl 6èƒ½æˆä¸ºæ›´æµè¡Œçš„è¯­è¨€ï¼Œå¦‚æœä½ æƒ³æŠŠâ€œç°åœ¨â€
å½“ä½œæœªæ¥ï¼Œé‚£ä¹Ÿæ˜¯å¾ˆå¥½çš„ï¼Œä½†æˆ‘ä»¬å¯¹å¯¼è‡´äº‰è®ºçš„éæ­¤å³å½¼çš„æ€æƒ³ä¸æ„Ÿå…´è¶£ã€‚

=head1 CPAN

è¯·æµè§ˆ L<https://modules.perl6.org/> .

å¦‚æœä½ ä½¿ç”¨çš„æ¨¡å—è¿˜æ²¡æœ‰è¢«ç§»æ¤åˆ° Perl 6ï¼Œè€Œä¸”åœ¨åˆ—è¡¨ä¸­æ²¡æœ‰æ›¿ä»£å“ï¼Œ
å¯èƒ½åœ¨ Perl 6ä¸­çš„ä½¿ç”¨é—®é¢˜è¿˜æ²¡æœ‰è§£å†³ã€‚æœ‰å¾ˆå¤šç›®æ ‡æ˜¯ä¸ºäº†åœ¨ Perl6
ä¸­ C<use> Perl5æ¨¡å—çš„å·¥ç¨‹ï¼š

v5æ¨¡å—æ„åœ¨è®©Rakudoè‡ªèº«è§£æPerl5çš„ä»£ç ï¼Œç„¶åç¼–è¯‘æˆå’ŒPerl6åŒæ ·çš„å­—èŠ‚ç ã€‚
L<Inline::Perl5|https://github.com/niner/Inline-Perl5/>å·¥ç¨‹ä½¿ç”¨ä¸€ä¸ª
å†…åµŒçš„ C<perl> è§£é‡Šå™¨è¿è¡Œ Perl 6è„šæœ¬ä¸­è°ƒç”¨åˆ°çš„Perl 5ä»£ç ã€‚

ä¸€ä¸ªæœ€ç®€å•çš„å®ä¾‹ï¼š

=for code :skip-test<Inline module not always present when testing>
# from<Perl5> ä½¿ç”¨ Perl 6 é¦–å…ˆåŠ è½½ Inline::Perl5(å¦‚æœå®‰è£…è¿‡çš„è¯)
# å¹¶ä¸”ä»Perl 5ä¸­åŠ è½½Scalar::Utilæ¨¡å—

use Scalar::Util:from<Perl5> <looks_like_number>;
say looks_like_number "foo";   # 0
say looks_like_number "42";    # 1

æœ‰å¾ˆå¤šPerl5 æ¨¡å—å·²ç»è¿ç§»åˆ°äº†Perl6ä¸­äº†ï¼ŒCPAN Butterflyè®¡åˆ’æä¾›äº†ä¸€ä¸ªAPI
æ¥ç»´æŠ¤è¿™äº›æ¨¡å—ï¼Œåˆ—è¡¨è§ L<https://modules.perl6.org/t/CPAN5>

å¾ˆå¤šPerl 5å†…å»ºå‡½æ•°ï¼ˆå¤§æ¦‚100å¤šä¸ªï¼‰ï¼Œå·²ç»æŒ‰ç…§ç›¸åŒçš„è¯­æ³•è¢«ç§»æ¤åˆ°äº†Perl 6
æ¯”å¦‚Perl 5ä¸­çš„C<shift>å‡½æ•°ï¼ŒåŸºäºä¸åŒçš„ä¸Šä¸‹æ–‡ï¼Œé»˜è®¤æ¥å—C<@_>æˆ–è€…C<@ARGV>ä¸ºå‚æ•°ã€‚
è¿™äº›å†…å®¹å¯ä»¥é€šè¿‡ L<https://modules.perl6.org/t/Perl5>ä¸‹çš„å•ä¸ªç‹¬ç«‹æ¨¡å—åŠ è½½ï¼Œ
ä¹Ÿå¯ä»¥é€šè¿‡L<P5built-ins|https://modules.perl6.org/dist/P5built-ins>æ‰“åŒ…ä¸€æ¬¡æ€§è·å–ã€‚

=head1 è¯­æ³•

=head2 æ ‡è¯†ç¬¦

å¯¹äºæ ‡è¯†ç¬¦ï¼ŒPerl 6å…è®¸ä½ ä½¿ç”¨æ¨ªæ (C<->)ï¼Œä¸‹åˆ’çº¿(C<_>)ï¼Œæ’‡å·(C<'>)ï¼Œä»¥åŠå­—æ¯æ•°å­—ï¼š

    sub test-doesn't-hang { ... }
    my $à¸„à¸§à¸²à¸¡à¸ªà¸‡à¸š = 42;
    my \Î” = 72; say 72 - Î”;

=head2 CÂ«->Â» æ–¹æ³•è°ƒç”¨

å¦‚æœä½ æœ‰è¯»è¿‡ Perl 6çš„ä»£ç ï¼Œä¸€ä¸ªæœ€æ˜æ˜¾çš„åœ°æ–¹å°±æ˜¯æ–¹æ³•è°ƒç”¨è¯­æ³•ç°åœ¨ä½¿ç”¨ç‚¹æ›¿ä»£äº†ç®­å¤´ï¼š

=for code :lang<perl5>
    $person->name  # Perl 5
=for code :preamble<no strict;>
    $person.name   # Perl 6

ç‚¹ç¬¦å·å³å®¹æ˜“ä¹¦å†™åˆæ›´åŠ ç¬¦åˆè¡Œä¸šæ ‡å‡†ï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿæƒ³èµ‹äºˆç®­å¤´åˆ«çš„ä½¿å‘½ï¼ˆå­—ç¬¦ä¸²è¿æ¥ç°åœ¨ä½¿ç”¨C<~>è¿ç®—ç¬¦ï¼‰ã€‚
å¯¹äºç›´åˆ°è¿è¡Œæ—¶æœŸæ‰çŸ¥é“åå­—çš„æ–¹æ³•è°ƒç”¨ï¼š

=for code :lang<perl5>
    $object->$methodname(@args);  # Perl 5
=for code :preamble<no strict;>
    $object."$methodname"(@args); # Perl 6

å¦‚æœä½ çœç•¥äº†åŒå¼•å·ï¼Œé‚£ä¹ˆ Perl 6ä¼šè®¤ä¸º  C<$methodname> åŒ…å«ä¸€ä¸ª C<Method> å¯¹è±¡ï¼Œ
è€Œä¸æ˜¯ç®€å•çš„æ–¹æ³•åå­—å­—ç¬¦ä¸²ã€‚Perl 6ä¸­ä¸€åˆ‡çš†å¯¹è±¡ã€‚

=head2 ç©ºç™½

Perl 5åœ¨å…è®¸ç©ºç™½çš„ä½¿ç”¨ä¸Šæœ‰ç€æƒŠäººçš„çµæ´»æ€§ï¼Œå³ä½¿å¤„äºä¸¥æ ¼æ¨¡å¼ï¼ˆstrict modeï¼‰å¹¶ä¸”æ‰“å¼€è­¦å‘Šï¼ˆwarnings)æ—¶ï¼š

=for code :lang<perl5>
    # ä¸ç¬¦åˆä¹ æƒ¯ï¼Œä½†æ˜¯åœ¨ Perl 5æ˜¯å¯ä»¥çš„
    say"Hello ".ucfirst  ($people
        [$ i]
        ->
        name)."!"if$greeted[$i]<1;

Perl 6ä¹Ÿæ”¯æŒç¨‹åºå‘˜ä¹¦å†™è‡ªç”±å’Œä»£ç çš„åˆ›é€ æ€§ï¼Œä½†æ˜¯æƒè¡¡è¯­æ³•çµæ´»æ€§å’Œå…¶ä¸€è‡´æ€§ã€ç¡®å®šæ€§ã€å¯æ‰©å±•çš„grammarï¼Œ
æ”¯æŒä¸€æ¬¡è§£æä»¥åŠæœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯ï¼Œé›†æˆå¦‚è‡ªå®šä¹‰è¿ç®—ç¬¦çš„ç‰¹æ€§ï¼Œå¹¶ä¸”ä¸ä¼šå¯¼è‡´ç¨‹åºå‘˜è¯¯ç”¨çš„è®¾è®¡ç›®æ ‡ï¼Œ
å¹¶ä¸”ï¼Œ â€œcode golfâ€çš„åšæ³•ä¹Ÿå¾ˆé‡è¦ï¼ŒPerl 6çš„è®¾è®¡åœ¨æ¦‚å¿µä¸Šæ›´ç®€æ´è€Œä¸æ˜¯å‡»é”®ä¸Šã€‚

å› æ­¤ï¼Œåœ¨ Perl 5çš„è¯­æ³•çš„è®¸å¤šåœ°æ–¹ç©ºç™½éƒ½æ˜¯å¯é€‰çš„ï¼Œä½†åœ¨ Perl 6é‡Œå¯èƒ½æ˜¯å¼ºåˆ¶çš„æˆ–è€…ç¦æ­¢çš„ï¼Œ
è¿™äº›é™åˆ¶ä¸­ çš„è®¸å¤šä¸å¤ªå¯èƒ½å…³ç³»åˆ°ç°å®ç”Ÿæ´»ä¸­çš„ Perl ä»£ç ï¼ˆä¸¾ä¾‹æ¥è¯´ï¼Œsigil å’Œå˜é‡åå­—ä¹‹é—´çš„ç©ºæ ¼è¢«ç¦æ­¢äº†ï¼‰ï¼Œ
ä½†æ˜¯æœ‰ä¸€äº›å¯èƒ½ä¸å¤ªå¹¸è¿çš„å’Œä¸€äº› Perl hackerçš„ç¼–ç¨‹ä¹ æƒ¯é£æ ¼ç›¸å†²çªï¼š

=begin item
I<å‚æ•°åˆ—è¡¨çš„å¼€æ‹¬å·ä¹‹å‰ä¸å…è®¸åŒ…å«ç©ºç™½>

=for code :lang<perl5>
    substr ($s, 4, 1); # Perl 5 (è¿™åœ¨ Perl 6 æ„å‘³ç€ä¼ é€’äº†ä¸€ä¸ªåˆ—è¡¨å‚æ•°)
=for code :preamble<no strict;>
    substr($s, 4, 1);  # Perl 6
    substr $s, 4, 1;   # Perl 6 - æ›¿ä»£æ‹¬å·çš„é£æ ¼
=end item

å¦‚æœä¸ä¹ æƒ¯è¿™ç§é™åˆ¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ C<Slang::Tuxic>æ¨¡å—ï¼Œå®ƒä¿®æ”¹äº†Perl 6çš„è¯­æ³•ï¼Œè®©ä½ å¯ä»¥
åœ¨å‚æ•°åˆ—è¡¨æ‹¬å·ä¹‹å‰å¸¦æœ‰ç©ºæ ¼ã€‚

=begin item
I<å…³é”®å­—åé¢è¦ç´§è·Ÿç©ºç™½>

=for code :lang<perl5>
    my($alpha, $beta);          # Perl5 è¿™åœ¨ Perl6é‡Œé¢å°†å°è¯•è°ƒç”¨ä¾‹ç¨‹my()
=for code :preamble<no strict;>
    my ($alpha, $beta);         # Perl 6

=for code :lang<perl5>
    if($a < 0) { ... }          # Perl 5, perl6ä¸­æŠ›å‡ºå¼‚å¸¸
=for code :preamble<no strict;>
    if ($a < 0) { ... }         # Perl 6
    if $a < 0 { ... }           # Perl 6, æ›´ç¬¦åˆä¹ æƒ¯

=for code :lang<perl5>
    while($x-- > 5) { ... }     # Perl 5, perl6ä¸­æŠ›å‡ºå¼‚å¸¸
=for code :preamble<no strict;>
    while ($x-- > 5) { ... }    # Perl 6
    while $x-- > 5 { ... }      # Perl 6, æ›´ç¬¦åˆä¹ æƒ¯

=end item

=begin item
I<å‰ç¼€è¿ç®—ç¬¦åé¢æˆ–è€…åç¼€è¿ç®—ç¬¦ã€åç¼€ç¯ç»•è¿ç®—ç¬¦ï¼ˆåŒ…å«æ•°ç»„ã€å“ˆå¸Œä¸‹æ ‡è¿ç®—ç¬¦ï¼‰çš„å‰é¢ä¸å…è®¸åŒ…å«ç©ºç™½ã€‚>

=for code :lang<perl5>
    $seen {$_} ++; # Perl 5
=for code :preamble<no strict;>
    %seen{$_}++;   # Perl 6
=end item

=begin item
I<ä¸­ç¼€è¿ç®—ç¬¦åœ¨å¯èƒ½å’Œå­˜åœ¨çš„åç¼€è¿ç®—ç¬¦æˆ–è€…åç¼€ç¯ç»•è¿ç®—ç¬¦å†²çªæ—¶å‰é¢è¦åŒ…å«ç©ºç™½ï¼š>

=for code :lang<perl5>
    $n<1;   # Perl 5 (åœ¨ Perl 6é‡Œé¢å¯èƒ½å’Œåç¼€ç¯ç»•è¿ç®—ç¬¦ < > å†²çª)
=for code :preamble<no strict;>
    $n < 1; # Perl 6

=end item

+=begin item
+I<ä½†æ˜¯, åœ¨æ–¹æ³•è°ƒç”¨ä¹‹å‰å¯ä»¥æœ‰ç©ºæ ¼>

=for code :lang<perl5>
# Perl 5
my @books = $xml
   ->parse_file($file)          # æ³¨é‡Š
   ->findnodes("/library/book");

=for code :preamble<no strict;>
# Perl 6
my @books = $xml
   .parse-file($file)         # æ³¨é‡Š
   .findnodes("/library/book");
=end item

ä¸è¿‡ï¼Œä½ å¯ä»¥ä½¿ç”¨L<unspace|https://design.perl6.org/S02.html#Unspaces>åœ¨Perl6
çš„ä¸å…è®¸ä½¿ç”¨ç©ºç™½çš„ä»£ç å¤„å¢åŠ ç©ºç™½ï¼š

å‚è€ƒPerl6ç›¸å…³è®¾è®¡æ–‡æ¡£ L<S03#Minimal whitespace
DWIMmery|https://design.perl6.org/S03.html#Minimal_whitespace_DWIMmery> å’Œ
L<S04#Statement parsing|https://design.perl6.org/S04.html#Statement_parsing>.

=head2 Sigils

åœ¨ Perl 5ä¸­ï¼Œæ•°ç»„å’Œå“ˆå¸Œä½¿ç”¨çš„ sigils å–å†³äºæ€æ ·è®¿é—®å®ƒä»¬ã€‚ åœ¨ Perl 6é‡Œé¢ï¼Œ
ä¸è®ºå˜é‡æ€æ ·è¢«ä½¿ç”¨ï¼Œsigils æ˜¯ä¸å˜çš„ - ä½ å¯ä»¥æŠŠä»–ä»¬ä½œä¸ºå˜é‡åå­—çš„ä¸€éƒ¨åˆ†
ï¼ˆå‚è€ƒL<#Dereferencing>ï¼‰ã€‚

=head3 C<$> æ ‡é‡

C<$>æ ‡è¯†ç¬¦ç°åœ¨æ€»æ˜¯å’Œâ€œæ ‡é‡â€å˜é‡ä¸€èµ·ä½¿ç”¨ï¼ˆæ¯”å¦‚C<$name>ï¼‰ï¼Œä¸å†ç”¨äº 
L<array indexing|#[]_Array_indexing/slicing>ä»¥åŠL<Hash
indexing|#{}_Hash_indexing/slicing>ã€‚ è¿™å°±æ˜¯è¯´ï¼Œä½ ä»ç„¶å¯ä»¥ä½¿ç”¨C<$x[1]>å’Œ C<$x{"foo"}>ï¼Œ
ä½†æ˜¯å®ƒä»¬æ˜¯ä½œç”¨åœ¨$xä¸Šï¼Œå¹¶ä¸ä¼šå¯¹ç›¸ä¼¼åå­—çš„@xå’Œ%xæœ‰å½±å“ï¼Œå®ƒä»¬ç°åœ¨å¯ä»¥é€šè¿‡@x[1]å’Œ%x{"foo"}
æ¥è®¿é—®ã€‚

=head3 C<@> æ•°ç»„

C<@>æ ‡è¯†ç¬¦ç°åœ¨æ€»æ˜¯å’Œâ€œæ•°ç»„â€å˜é‡ä¸€èµ·ä½¿ç”¨ï¼ˆæ¯”å¦‚ @monthï¼Œ@month[2]ï¼Œ@month[2,4]ï¼‰ï¼Œ 
ä¸å†ç”¨äº L<value-slicing
hashes|#{}_Hash_indexing/slicing>åˆ‡ç‰‡ã€‚

=head3 C<%> å“ˆå¸Œ

C<%>æ ‡è¯†ç¬¦ç°åœ¨æ€»æ˜¯å’Œâ€œå“ˆå¸Œâ€å˜é‡ä¸€èµ·ä½¿ç”¨ï¼ˆæ¯”å¦‚C<%calories>,
C<%calories<apple>>, C<%calories<pear plum>>ï¼‰ï¼Œ
ä¸å†ç”¨äºL<key/value-slicing arrays|#[]_Array_indexing/slicing>åˆ‡ç‰‡ã€‚

=head3 C<&> ä¾‹ç¨‹

C<&>æ ‡è¯†ç¬¦ç°åœ¨å§‹ç»ˆï¼ˆå¹¶ä¸”ä¸å†éœ€è¦åæ–œæ äº†ï¼‰å¼•ç”¨ä¸€ä¸ªå‘½åå­ä¾‹ç¨‹/è¿ç®—ç¬¦çš„å‡½æ•°å¯¹è±¡å¹¶ä¸ä¼šæ‰§è¡Œ
å®ƒä»¬ï¼Œ æ¢å¥è¯è¯´ï¼ŒæŠŠå‡½æ•°åå­—å½“ä½œâ€œåè¯â€è€Œä¸æ˜¯â€œåŠ¨è¯â€ï¼š

    my $sub = \&foo; # Perl 5
    my $sub = &foo;  # Perl 6

    callback => sub { say @_ }  # Perl 5 - ä¸èƒ½ç›´æ¥ä¼ é€’å†…å»ºè¿‡ç¨‹
    callback => &say            # Perl 6 -  & ç»™å‡ºä»»ä½•è¿‡ç¨‹çš„â€œåè¯â€å½¢å¼

å› ä¸º Perl 6ä¸€æ—¦å®Œæˆç¼–è¯‘å°±ä¸å…è®¸åœ¨ä½œç”¨åŸŸå†…æ·»åŠ /åˆ é™¤ç¬¦å·ï¼Œæ‰€ä»¥ Perl 6å¹¶æ²¡æœ‰ä¸ Perl 5ä¸­C<undef &foo;>;
 ç­‰æ•ˆçš„è¯­å¥ï¼Œå¹¶ä¸”æœ€æ¥è¿‘Perl5çš„C<undef &foo;>æ˜¯C<defined ::(&"foo")>ï¼ˆè¿™ä½¿ç”¨äº†â€œåŠ¨æ€ç¬¦
å·æŸ¥æ‰¾(dynamic symbol lookup)â€è¯­æ³•ï¼‰ã€‚ ç„¶è€Œï¼Œä½ å¯ä»¥ä½¿ç”¨ my &foo; å£°æ˜ä¸€ä¸ªå¯ä¿®æ”¹åå­—çš„å­ä¾‹ç¨‹ï¼Œ
ç„¶ååœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘C<&foo>èµ‹å€¼æ”¹å˜å®ƒã€‚

åœ¨ Perl 5ä¸­ï¼ŒC<&>æ ‡è¯†ç¬¦è¿˜å¯ä»¥ç”¨æ¥ä»¥ç‰¹å®šçš„æ–¹å¼è°ƒç”¨å­ä¾‹ç¨‹ï¼Œè¿™å’Œæ™®é€šçš„è¿‡ç¨‹è°ƒç”¨æœ‰äº›è®¸ä¸åŒï¼Œ
åœ¨ Perl 6ä¸­ è¿™äº›ç‰¹æ®Šçš„æ ¼å¼ä¸å†å¯ç”¨ï¼š

=begin item
C<&foo(...)> I<è§„é¿å‡½æ•°åŸå‹>

åœ¨ Perl 6ä¸­ä¸å†æœ‰åŸå‹äº†ï¼Œå¯¹ä½ æ¥è¯´ï¼Œè¿™å’Œä¼ é€’ä¸€ä¸ªä»£ç å—æˆ–è€…ä¸€ä¸ªæŒæœ‰ä»£ç å¯¹è±¡çš„å˜é‡ä½œä¸ºå‚æ•°
æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼š

    # Perl 5:
    first_index { $_ > 5 } @values;
    &first_index($coderef, @values); # (ç¦æ­¢åŸå‹å¹¶ä¸”ä¼ é€’ä¸€ä¸ªä»£ç å—ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°)
    # Perl 6:
    first { $_ > 5 }, @values, :k;   # :k å‰¯è¯ä½¿ç¬¬ä¸€ä¸ªå‚æ•°è¿”å›ä¸‹æ ‡
    first $coderef, @values, :k;
=end item

=begin item
C<&foo;>I<å’Œ>C<goto &foo;>I<ç”¨æ¥é‡ç”¨è°ƒç”¨è€…çš„å‚æ•°åˆ—è¡¨æˆ–è€…æ›¿æ¢è°ƒç”¨æ ˆçš„è°ƒç”¨è€…>
Perl 6ä¸­ä½¿ç”¨ L<C<callsame>|/language/functions#index-entry-dispatch_callsame>æ¥re-dispatching 
æˆ–è€…L<C<nextsame>|/language/functions#index-entry-dispatch_nextsame>å’Œ
L<C<nextwith>|/language/functions#index-entry-dispatch_nextwith>, åœ¨Perl 5ä¸­æ²¡æœ‰å¯¹åº”è¯­æ³•ã€‚

begin comment
   # TODO: å»ºè®®ä½¿ç”¨Rakudoä¸­çš„ .nextsame æˆ–è€… .nextwith
=end comment

=for code :lang<perl5> 
sub foo { e"before"; &bar;     say "after" } # Perl 5
=for code
sub foo { say "before"; bar(|@_); say "after" } # Perl 6 - have to be explicit

=saybegin code
proto foo (|) {*};
multi foo ( Any $n ) {
    say "Any"; say $n;
};
multi foo ( Int $n ) {
    say "Int"; callsame;
};
foo(3); # /language/functions#index-entry-dispatch_callsame

=end code

=end item

=head3 C<*> Glob

=comment TODO: å¯¹perl5 typeglobsä¸­é‚£äº›ç”¨ä¾‹ç›®å‰ç¡®åˆ‡æ˜¯éœ€è¦åœ°ï¼Œå¹¶ä¸”å¯¹è¿™éƒ¨åˆ†åå°„æœºåˆ¶
åˆ—å‡ºï¼ˆç¿»è¯‘ï¼‰éœ€è¦æ›´è¿›ä¸€æ­¥çš„ç ”ç©¶ã€‚

åœ¨ Perl 5ä¸­ï¼ŒC<*>æ ‡è¯†ç¬¦ æŒ‡å‘ä¸€ä¸ªGLOBç»“æ„ï¼Œç»§è€ŒPerlå¯ä»¥ä½¿ç”¨å®ƒå­˜å‚¨éè¯æ³•å˜é‡ï¼Œ
æ–‡ä»¶å¥æŸ„ï¼Œ è¿‡ç¨‹ï¼Œè¿˜æœ‰æ ¼å¼ï¼ˆï¼Ÿformatsï¼‰ã€‚ ï¼ˆä¸è¦å’Œ Perl 5çš„ç”¨æ¥è¯»å–ç›®å½•ä¸­çš„
æ–‡ä»¶åçš„å†…å»ºå‡½æ•°C<glob()>æ··æ·†äº†ï¼‰ã€‚

ä½ æœ€å¯èƒ½åœ¨ä¸æ”¯æŒè¯æ³•æ–‡ä»¶å¥æŸ„ï¼Œä½†éœ€è¦ä¼ é€’æ–‡ä»¶å¥æŸ„åˆ°è¿‡ç¨‹æ—¶çš„æ—©æœŸ Perl ç‰ˆæœ¬ä»£ç ä¸­ä¸ GLOB é‚‚é€…ï¼š

    # Perl 5 - è€æ–¹æ³•
    sub read_2 {
        local (*H) = @_;
        return scalar(<H>), scalar(<H>);
    }
    open FILE, '<', $path or die;
    my ($line1, $line2) = read_2(*FILE);

åœ¨ç¿»è¯‘åˆ°é€‚åˆPerl6çš„ä»£ç å‰ï¼Œä½ å¯èƒ½éœ€è¦é‡æ„ä½ çš„ Perl5ä»£ç ä»¥ç§»é™¤å¯¹ GLOBçš„ä¾èµ–ï¼š

    # Perl 5 - è¯æ³•æ–‡ä»¶å¥æŸ„çš„æ›´ç°ä»£çš„ç”¨æ³•
    sub read_2 {
        my ($fh) = @_;
        return scalar(<$fh>), scalar(<$fh>);
    }
    open my $in_file, '<', $path or die;
    my ($line1, $line2) = read_2($in_file);

ç„¶åè¿™æ˜¯å¯èƒ½çš„ä¸€ä¸ª Perl6ç¿»è¯‘ä»£ç ï¼š

    # Perl 6
    sub read-n($fh, $n) {
        return $fh.get xx $n;
    }
    my $in-file = open $path or die;
    my ($line1, $line2) = read-n($in-file, 2);

=head2 [] æ•°ç»„ç´¢å¼•/åˆ‡ç‰‡

ç°åœ¨ï¼Œæ•°ç»„çš„ç´¢å¼•å’Œåˆ‡ç‰‡ä¸å†æ”¹å˜å˜é‡çš„L<sigil|#@_Array>ï¼Œ å¹¶ä¸”åœ¨è¿˜å¯ä»¥ä½¿ç”¨å‰¯è¯
æ§åˆ¶åˆ‡ç‰‡çš„ç±»å‹ï¼š

=begin item
I<Indexing>

    say $months[2]; # Perl 5
    say @months[2]; # Perl 6 - ç”¨@è€Œé$
=end item

=begin item
I<Value-slicing>

    say join ',', @months[6, 8..11]; # Perl5å’ŒPerl6
=end item

=begin item
I<Key/value-slicing>

    say join ',', %months[6, 8..11];    # Perl 5
    say join ',', @months[6, 8..11]:kv; # Perl 6 - @è€Œé%; ç”¨:kvå‰¯è¯
=end item

è¿˜æœ‰æ³¨æ„ä¸‹æ ‡æ‹¬å·ç°åœ¨å¹¶ä¸æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³•å½¢å¼ï¼Œè€Œæ˜¯ä¸€ä¸ªæ™®é€šçš„åç¼€ç¯ç»•è¿ç®—ç¬¦ï¼Œ
å› æ­¤æ£€æµ‹å…ƒç´ æ˜¯å¦å­˜åœ¨å’Œåˆ é™¤å…ƒç´ ä½¿ç”¨å‰¯è¯å®Œæˆã€‚

=head2 {} å“ˆå¸Œç´¢å¼•/åˆ‡ç‰‡

ç°åœ¨ï¼Œå“ˆå¸Œçš„ç´¢å¼•å’Œåˆ‡ç‰‡ä¸å†æ”¹å˜å˜é‡çš„L<sigil|#%_Hash>ï¼Œ å¹¶ä¸”åœ¨è¿˜å¯ä»¥ä½¿ç”¨å‰¯è¯
æ§åˆ¶åˆ‡ç‰‡çš„ç±»å‹ã€‚ è¿˜æœ‰ï¼ŒèŠ±æ‹¬å·ä¸­çš„å•è¯ä¸‹æ ‡ä¸å†è‡ªåŠ¨å¼•ç”¨ï¼ˆå³è‡ªåŠ¨åœ¨ä¸¤è¾¹åŠ ä¸ŠåŒå¼•å·ï¼‰ï¼Œ
ä½œä¸ºæ›¿ä»£ï¼Œæ€»æ˜¯è‡ªåŠ¨å¼•ç”¨å…¶å†…å®¹çš„æ–° çš„å°–æ‹¬å·ç‰ˆæœ¬æ˜¯å¯ç”¨çš„ï¼ˆä½¿ç”¨å’ŒC<qw//>å¼•ç”¨æ„é€ 
ç›¸åŒçš„è§„åˆ™ï¼‰

=begin item
I<Indexing>

    say $calories{"apple"}; # Perl 5
    say %calories{"apple"}; # Perl 6 - %è€Œé$

    say $calories{apple};   # Perl 5
    say %calories<apple>;   # Perl 6 - å°–æ‹¬å·ï¼Œ% æ›¿ä»£ $
    say %caloriesÂ«"$key"Â»;  # Perl 6 - åŒå°–æ‹¬å·å†…æ’ä½œä¸ºä¸€ä¸ªStråˆ—è¡¨
=end item

=begin item
I<Value-slicing>

    say join ',', @calories{'pear', 'plum'}; # Perl 5
    say join ',', %calories{'pear', 'plum'}; # Perl 6 - %è€Œé@
    say join ',', %calories<pear plum>;      # Perl 6 ï¼ˆæ›´å¥½çš„ç‰ˆæœ¬ï¼‰
    my $keys = 'pear plum';
    say join ',', %caloriesÂ«$keysÂ»;          # Perl 6 - åœ¨å†…æ’ä¹‹åå®Œæˆåˆ‡åˆ†
=end item

=begin item
I<Key/value-slicing>

    say join ',', %calories{'pear', 'plum'};    # Perl 5
    say join ',', %calories{'pear', 'plum'}:kv; # Perl 6 - ä½¿ç”¨ :kv å‰¯è¯
    say join ',', %calories<pear plum>:kv;      # Perl 6 (æ›´å¥½çš„ç‰ˆæœ¬)
=end item

è¿˜æœ‰æ³¨æ„ä¸‹æ ‡èŠ±æ‹¬å·ç°åœ¨ä¸å†æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³•å½¢å¼ï¼Œè€Œæ˜¯ä¸€ä¸ªæ™®é€šçš„åç¼€ç¯ç»•è¿ç®—ç¬¦ï¼Œ
å› æ­¤æ£€æµ‹é”®æ˜¯å¦å­˜åœ¨å’Œé”®ç§»é™¤ä½¿ç”¨å‰¯è¯å®Œæˆã€‚

=head2 å¼•ç”¨çš„åˆ›å»ºå’Œä½¿ç”¨

åœ¨ Perl 5ä¸­ï¼Œå¼•ç”¨ä¸€ä¸ªåŒ¿åæ•°ç»„å’Œå“ˆå¸Œä»¥åŠè¿‡ç¨‹çš„åœ¨å®ƒä»¬åˆ›å»ºçš„æ—¶å€™è¿”å›ï¼Œå¼•ç”¨ä¸€ä¸ª
å­˜åœ¨çš„å‘½åå˜é‡å’Œè¿‡ç¨‹ä½¿ç”¨ C<\>è¿ç®—ç¬¦å®Œæˆã€‚"å¼•ç”¨/è§£å¼•"åœ¨Perl 6 å®¹å™¨ç³»ç»Ÿä¸­æ²¡æœ‰
æ˜ç¡®çš„å¯¹åº”ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´å…³æ³¨äºå¼•ç”¨æ“ä½œç¬¦ï¼Œè€Œä¸æ˜¯å®é™…çš„è¯­æ³•

=for code :lang<perl5>
 my $aref = \@aaa  ; # Perl 5

è¿™å¯ä»¥ç”¨æ¥ç»™ä¸€ä¸ªä¾‹ç¨‹ä¼ é€’ä¸€ä¸ªå¼•ç”¨ï¼Œä½†æ˜¯åœ¨Perl 6ä¸­ï¼Œä¼ é€’ï¼ˆå•ä¸ªï¼‰åº•å±‚å¯¹è±¡
ï¼ˆä½ å¯ä»¥å°†å®ƒå½“åšæ˜¯ä¸€ç§å¼•ç”¨ï¼‰

=begin code

my @array = 4,8,15;
{ $_[0] = 66 }(@array);   # run the block with @array aliased to $_
say @array; #  OUTPUT: Â«[66 8 15]â¤Â»

=end code

åº•å±‚çš„æ•°ç»„å¯¹è±¡C<@array>è¢«ä¼ é€’ï¼Œå¹¶ä¸”å®ƒçš„ç¬¬ä¸€ä¸ªå€¼åœ¨ä¾‹ç¨‹å†…è¢«ä¿®æ”¹ã€‚

åœ¨Perl 5 ä¸­ï¼Œè§£å¼•ç”¨çš„è¯­æ³•æ˜¯ç±»å‹ç¬¦åè·Ÿä¸ªèŠ±æ‹¬å·ã€‚Perl 6ä¸­ï¼Œè¿™ä¸ªè¯­æ³•ä¸å†é€‚ç”¨ï¼Œ
è§£å¼•ç”¨æ“ä½œç¬¦æ²¡ç”¨äº†ã€‚

åœ¨Perl 5 ä¸­ï¼Œç®­å¤´ç¬¦å·CÂ«->Â»ï¼Œç”¨äºå¯¹ä¸€ä¸ªå¤åˆå¼•ç”¨ï¼ˆæ•°ç»„ï¼Œå“ˆå¸Œï¼‰çš„å•ä¸ªå…ƒç´ çš„è®¿é—®
æˆ–è€…å¯¹å‡½æ•°å¼•ç”¨çš„è°ƒç”¨ã€‚åœ¨Perl 6 ä¸­C<.>æ“ä½œç¬¦ç”¨äºå¯¹è±¡ï¼Œå…¶å®ƒåˆ™æ²¡æœ‰å®é™…ä½¿ç”¨ã€‚ 

=for code :lang<perl5>
# Perl 5
    say $arrayref->[7];
    say $hashref->{'fire bad'};
    say $subref->($foo, $bar);

åœ¨æœ€è¿‘çš„ Perl5ç‰ˆæœ¬ï¼ˆ5.20æˆ–è€…ä»¥åï¼‰ï¼Œä¸€ä¸ªæ–°çš„ç‰¹æ€§å…è®¸ä½¿ç”¨ç®­å¤´è¿ç®—ç¬¦è§£å¼•ç”¨ï¼Œ å‚è§
L<Postfix Dereferencing|http://search.cpan.org/~shay/perl-5.20.1/pod/perl5200delta.pod#å®éªŒæ€§çš„åç¼€è§£å¼•ç”¨>ï¼Œ
è¿™ä¸ªæ–°ç‰¹æ€§å’Œ Perl 6ä¸­çš„C<.list>ä»¥åŠC<.hash>æ–¹æ³•å¯¹åº”ï¼š

=for code :lang<perl5>

    # Perl 5.20
        use experimental qw< postderef >;
        my @a = $arrayref->@*;
        my %h = $hashref->%*;
        my @slice = $arrayref->@[3..7];

=for code :preamble<no strict;>
    # Perl 6
        my @a = $arrayref.list;         # æˆ– @($arrayref)
        my %h = $hashref.hash;          # æˆ– %($hashref)
        my @slice = $arrayref[3..7];

â€œZenâ€åˆ‡ç‰‡æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼š

=for code :preamble<no strict;>
    # Perl 6
        my @a = $arrayref[];
        my %h = $hashref{};

æ›´å¤šä¿¡æ¯è¯·å‚è€ƒL<S32/Containers|https://design.perl6.org/S32/Containers.html>

=head1 æ“ä½œç¬¦

æ›´å¤šè¿ç®—ç¬¦ç»†èŠ‚è¯·å‚è§L<S03/Operators|https://design.perl6.org/S03.html#Overview>

ä¸ºå˜åŒ–çš„æ“ä½œç¬¦:

=item C<+> æ•°å€¼åŠ æ³•
=item C<-> æ•°å€¼å‡æ³•
=item C<*> æ•°å€¼ä¹˜æ³•
=item C</> æ•°å€¼é™¤æ³•
=item C<%> æ±‚ä½™
=item C<**> å¹‚ï¼Œå¼€æ–¹
=item C<++> è‡ªå¢
=item C<--> è‡ªå‡
=item C<! && || ^> é€»è¾‘è¿ç®—ç¬¦,é«˜ä¼˜å…ˆçº§
=item C<not and or xor>   é€»è¾‘è¿ç®—ç¬¦,ä½ä¼˜å…ˆçº§
=item CÂ«== != < > <= >=Â»   æ•°å€¼æ¯”è¾ƒ
=item C<eq ne lt gt le ge> å­—ç¬¦æ¯”è¾ƒ

=head2 C<,> åˆ—è¡¨åˆ†å‰²ç¬¦

æœªå˜åŒ–ï¼Œä½†æ˜¯è¦æ³¨æ„ä¸ºäº†æŠŠä¸€ä¸ªæ•°ç»„å˜é‡å±•å¼€ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼ˆä¸ºäº†å¯¹å…¶å‰åæ·»åŠ æ›´å¤šå…ƒç´ ï¼‰
åº”è¯¥ä½¿ç”¨ C<|>æ“ä½œç¬¦ã€‚ä¾‹å¦‚:

my @numbers = 100, 200, 300;
my @more_numbers = 500, 600, 700;
my @all_numbers = |@numbers, 400, |@more_numbers;

è¿™æ ·å°±å¯ä»¥å¯ä»¥åˆå¹¶æ•°ç»„ï¼Œæ–¹ä¾¿å®ç°éœ€æ±‚ã€‚

æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼Œè¡¨è¾¾å¼å³è¾¹ä¸å†éœ€è¦æ‹¬å¼§ï¼šåˆ—è¡¨åˆ†éš”å…³æ³¨çš„æ˜¯åˆ›å»ºåˆ—è¡¨ï¼Œè€Œä¸æ˜¯æ‹¬å¼§ã€‚

=head2 CÂ«<=> cmpÂ» ä¸‰ç›®è¿ç®—ç¬¦

åœ¨ Perl 5ï¼Œè¿™äº›è¿ç®—ç¬¦è¿”å› -1ï¼Œ0 æˆ–è€… 1ï¼Œè€Œåœ¨ Perl 6ï¼Œå®ƒä»¬è¿”å›å€¼å¯¹åº”çš„æ˜¯ 
C<Order::Less>, C<Order::Same>å’ŒC<Order::More>ã€‚

CÂ«cmpÂ»ç°åœ¨ç”¨CÂ«legÂ»æ›¿æ¢;å®ƒåªé€‚ç”¨äºå­—ç¬¦ä¸²ä¸Šä¸‹æ–‡æ¯”è¾ƒ.

CÂ«<=>Â» ä»ç„¶å¼ºåˆ¶ç”¨äºæ•°å€¼ä¸Šä¸‹æ–‡.

CÂ«cmpÂ» åœ¨ Perl 6ä¸­åŒæ—¶å…·å¤‡CÂ«<=>Â»å’ŒC<leg>åŠŸèƒ½,å…·ä½“å–å†³äºç±»å‹å’Œå‚æ•°.

=head2 C<~~> æ™ºèƒ½åŒ¹é…

è¿ç®—ç¬¦æœ¬èº«æ²¡æœ‰æ”¹å˜ï¼Œå®é™…åŒ¹é…çš„å†…å®¹è§„åˆ™ä¾èµ–äºå‚æ•°çš„ç±»å‹ï¼Œä¸è¿‡ Perl6ä¸­çš„è¿™äº›
è§„åˆ™è·ŸPerl5æœ‰å¾ˆå¤§ä¸åŒã€‚è¯·å‚è€ƒ:L<~~|/routine/~~>å’Œ
L<S03/Smart matching|https://design.perl6.org/S03.html#Smart_matching>

=head2 C<& | ^> å­—ç¬¦ä¸²ä½è¿ç®—ç¬¦
=head2 C<& | ^> æ•°å€¼ä½è¿ç®—ç¬¦
=head2 C<& | ^> é€»è¾‘è¿ç®—ç¬¦

åœ¨ Perl 5ä¸­ï¼Œ C<& | ^>çš„è¡Œä¸ºä¾èµ–äºå‚æ•°çš„å†…å®¹ï¼Œæ¯”å¦‚ï¼Œ`31|33 çš„è¿”å›å€¼å’ŒC<"31" |
"33">æ˜¯ä¸åŒçš„ã€‚

åœ¨ Perl 6ä¸­ï¼Œè¿™äº›å•å­—ç¬¦è¿ç®—ç¬¦éƒ½è¢«ç§»é™¤äº†ï¼Œæ›¿ä»£å®ƒä»¬çš„æ˜¯å¯ä»¥å¼ºåˆ¶æŠŠå‚æ•°è½¬æ¢åˆ°
éœ€è¦çš„å†…å®¹çš„åŒå­—ç¬¦è¿ç®—ç¬¦ã€‚

    # ä¸­ç¼€è¿ç®—ç¬¦ ï¼ˆä¸¤ä¸ªå‚æ•°ï¼Œå·¦å³å„ä¸€ä¸ªï¼‰
    +&  +|  +^  æŒ‰ä½å’ŒæŒ‰ä½æˆ–æŒ‰ä½å¼‚æˆ–ï¼šæ•°å€¼
    ~&  ~|  ~^  æŒ‰ä½å’ŒæŒ‰ä½æˆ–æŒ‰ä½å¼‚æˆ–ï¼šå­—ç¬¦ä¸²
    ?&  ?|  ?^  æŒ‰ä½å’ŒæŒ‰ä½æˆ–æŒ‰ä½å¼‚æˆ–ï¼šé€»è¾‘

    # å‰ç¼€è¿ç®—ç¬¦ ï¼ˆä¸€ä¸ªå‚æ•°ï¼Œåœ¨è¿ç®—ç¬¦åï¼‰
    +^  é: æ•°å€¼
    ~^  é: å­—ç¬¦ä¸²
    ?^  é: å¸ƒå°”å‹ï¼ˆä½œç”¨å’Œ!è¿ç®—ç¬¦ä¸€æ ·)

=head2 CÂ«<< >>Â»  æ•°å€¼å·¦|å³ç§»ä½è¿ç®—ç¬¦

 è¢«+<å’Œ +>å–ä»£ã€‚

    say 42 << 3; # Perl 5
    say 42 +< 3; # Perl 6

=head2 CÂ«=>Â» èƒ–é€—å·

åœ¨Perl5ä¸­ï¼ŒCÂ«=>Â»çš„è¡Œä¸ºå°±æƒ³ä¸€ä¸ªé€—å·ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨å¼•ç”¨ï¼ˆå³åŠ ä¸ŠåŒå¼•å·ï¼‰å·¦è¾¹çš„å‚æ•°ã€‚

åœ¨Perl6ä¸­ï¼ŒCÂ«=>Â»æ˜¯Pairè¿ç®—ç¬¦ï¼Œè¿™æ˜¯æœ€ä¸»è¦çš„ä¸åŒï¼Œä½†æ˜¯åœ¨è®¸å¤šæƒ…å†µä¸‹è¡Œä¸ºéƒ½å’Œ 
Perl5ä¸­ç›¸åŒã€‚

åœ¨å“ˆå¸Œåˆå§‹åŒ–æ—¶ï¼Œæˆ–è€…å‘ä¸€ä¸ªæœŸæœ›å“ˆå¸Œå¼•ç”¨çš„æ–¹æ³•ä¼ é€’ä¸€ä¸ªå‚æ•°æ—¶ï¼ŒCÂ«=>Â»çš„ç”¨æ³•å°±æ˜¯ç›¸åŒçš„ï¼š

    # åŒæ—¶é€‚ç”¨äºPerl5&6
    my %hash = ( AAA => 1, BBB => 2 );
    get_the_loot( 'diamonds', { quiet_level => 'very', quantity => 9 }); # æ³¨æ„èŠ±æ‹¬å·

åœ¨ä¸ºäº†ä¸å†å¼•ç”¨ï¼ˆä¸¤è¾¹åŠ ä¸ŠåŒå¼•å·ï¼‰åˆ—è¡¨çš„ä¸€éƒ¨åˆ†è€Œä½¿ç”¨CÂ«=>Â»ä½œä¸ºä¸€ç§ä¾¿åˆ©çš„æ–¹å¼æ—¶ï¼Œ
æˆ–è€…å‘ä¸€ä¸ªæœŸæœ›é”®ï¼Œ å€¼ï¼Œé”®ï¼Œå€¼è¿™æ ·çš„å¹³å¦åˆ—è¡¨çš„æ–¹æ³•ä¼ é€’å‚æ•°æ—¶ï¼Œç»§ç»­ä½¿ç”¨CÂ«=>Â»
å¯èƒ½ä¼šç ´åä½ çš„ä»£ç ï¼Œæœ€ç®€å•çš„è§£å†³æ–¹æ³•å°±æ˜¯å°†èƒ–é€—å·æ”¹ä¸ºæ™®é€šçš„é€—å·ï¼Œç„¶ååœ¨å¼•ç”¨
å·¦è¾¹çš„å‚æ•°ã€‚ 

æˆ–è€…ï¼Œä½ å¯ä»¥å°†æ–¹æ³•çš„æ¥å£æ”¹ä¸ºL<slurp a hash|/type/Signature#Slurpy_(A.K.A._Variadic)_Parameters>.
ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ³•æ˜¯æ–¹æ³•çš„æ¥å£æ”¹ä¸ºæœŸæœ› L<Pair|/type/Pair>ï¼›
ä½†æ˜¯ï¼Œè¿™éœ€è¦ä½ ç«‹å³æ”¹åŠ¨æ‰€æœ‰çš„æ–¹æ³•è°ƒç”¨ä»£ç ã€‚

æˆ–è€…ï¼Œä½ å¯ä»¥å°†æ–¹æ³•çš„æ¥å£æ”¹ä¸ºæ¥å—ä¸€ä¸ªå“ˆå¸Œï¼Œä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£å†³æ–¹å¼
å°±æ˜¯å°†æ–¹æ³•çš„æ¥å£æ”¹ä¸ºæœŸæœ›Pairï¼Œ ç„¶è€Œï¼Œè¿™éœ€è¦ä½ ç«‹å³æ”¹åŠ¨æ‰€æœ‰çš„æ–¹æ³•è°ƒç”¨ä»£ç ã€‚

    # Perl 5
    sub get_the_loot {
        my $loot = shift;
        my %options = @_;
        # ...
    }
    # æ³¨æ„ è¿™ä¸ªæ–¹æ³•è°ƒç”¨ä¸­æ²¡æœ‰ä½¿ç”¨èŠ±æ‹¬å·
    get_the_loot( 'diamonds', quiet_level => 'very', quantity => 9 );
    # Perl 6, æ¥å£æ”¹ä¸ºæŒ‡å®šæœ‰æ•ˆçš„é€‰é¡¹
    sub get_the_loot( $loot, *%options ) # *æ„å‘³ç€æ¥å—ä»»ä½•ä¸œè¥¿
        ...
    }
    get_the_loot( 'diamonds', quiet_level => 'very', quantity => 9 ); # æ³¨æ„ è¿™ä¸ªæ–¹æ³•è°ƒç”¨ä¸­æ²¡æœ‰ä½¿ç”¨èŠ±æ‹¬å·
    
    # Perl 6ä¸­ï¼Œæ¥å£æ”¹ä¸ºæŒ‡å®šæœ‰æ•ˆçš„é€‰é¡¹
    # sigil å‰é¢çš„å†’å·ä»£è¡¨æœŸæœ›ä¸€ä¸ª Pair
    # å‚æ•°çš„é”®åå­—å’Œå˜é‡ç›¸åŒ
    
    sub get_the_loot( $loot, :$quiet_level?, :$quantity = 1 ) {
        # This version will check for unexpected arguments!
        ...
    }
    get_the_loot( 'diamonds', quietlevel => 'very' ); # å‚æ•°åå­—æ‹¼å†™é”™è¯¯ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯


=head2 C<? :> æ¡ä»¶è¿ç®—ç¬¦

æ¡ä»¶è¿ç®—ç¬¦ C<? :>è¢«C<?? !!>å–ä»£ã€‚

 =for code :lang<perl5>
    my $result = $score > 60  ? 'Pass'  : 'Fail'; # Perl 5

=for code :preamble<my $score>
    my $result = $score > 60  ?? 'Pass' !! 'Fail'; # Perl 6


=head2 C<.> è¿æ¥è¿ç®—ç¬¦

è¢«æ³¢æµªçº¿æ›¿ä»£ã€‚

å°è´´å£«ï¼šæƒ³è±¡ä¸€ä¸‹ä½¿ç”¨é’ˆå’Œçº¿â€œç¼åˆâ€ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚

    $food = 'grape' . 'fruit'; # Perl 5
    $food = 'grape' ~ 'fruit'; # Perl 6

=head2 C<x> åˆ—è¡¨æˆ–è€…å­—ç¬¦ä¸²é‡å¤è¿ç®—ç¬¦

åœ¨ Perl 5ï¼ŒC<x>æ˜¯é‡å¤è¿ç®—ç¬¦,åœ¨æ ‡é‡å’Œåˆ—è¡¨ä¸¤ç§ä¸Šä¸‹æ–‡ä¸­è¡¨ç°ä¸åŒã€‚

=item åœ¨æ ‡é‡ä¸Šä¸‹æ–‡,C<x>å°†ä¼šé‡å¤ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚åœ¨ Perl 6é‡Œï¼ŒC<x>ä¼šåœ¨ä»»ä½•ä¸Šä¸‹æ–‡é‡å¤å­—ç¬¦ä¸²ã€‚
=item åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡ï¼ŒC<x>å½“ä¸”ä»…å½“å°†åˆ—è¡¨æ‹¬å…¥åœ†æ‹¬å·ä¸­æ—¶é‡å¤å½“å‰åˆ—è¡¨.

åœ¨Perl 6ï¼Œç”¨ä¸¤ç§ä¸åŒè¿ç®—ç¬¦è¡¨ç¤ºä»¥ä¸Šä¸¤ç§è¡Œä¸º:

=item C<x>é‡å¤ä¸€ä¸ªå­—ç¬¦ä¸²(ä»»ä½•ä¸Šä¸‹æ–‡)ã€‚
=item C<xx> åœ¨ä»»ä½•ä¸Šä¸‹æ–‡é‡å¤åˆ—è¡¨ã€‚

å°è´´å£«ï¼šxxç›¸å¯¹äºxæ˜¯æ¯”è¾ƒé•¿çš„ï¼Œæ‰€ä»¥xxé€‚ç”¨äºåˆ—è¡¨ã€‚


    # Perl 5
        print '-' x 80;             # æ‰“å°å‡ºä¸€è¡Œæ¨ªæ 
        @ones = (1) x 80;           # ä¸€ä¸ªå«æœ‰80ä¸ª1çš„åˆ—è¡¨
        @ones = (5) x @ones;        # æŠŠæ‰€æœ‰å…ƒç´ è®¾ä¸º5
    # Perl 6
        print '-' x 80;             # æ— å˜åŒ–
        @ones = 1 xx 80;            # ä¸å†éœ€è¦åœ†æ‹¬å·
        @ones = 5 xx @ones;         # ä¸å†éœ€è¦åœ†æ‹¬å·


=head2 C<..> C<...> åŒç‚¹ã€ä¸‰ç‚¹ã€èŒƒå›´ä»¥åŠç¿»è½¬è¿ç®—ç¬¦

åœ¨ Perl 5,C<..>ä¾èµ–äºä¸Šä¸‹æ–‡æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„è¿ç®—ç¬¦ã€‚

åœ¨åˆ—è¡¨ä¸Šä¸‹æ–‡,C<..> æ˜¯ç†Ÿæ‚‰çš„èŒƒå›´è¿ç®—ç¬¦ï¼ŒPerl 5çš„èŒƒå›´è¿ç®—ä»£ç ä¸éœ€è¦ç¿»è¯‘ã€‚

åœ¨æ ‡é‡ä¸Šä¸‹æ–‡ï¼ŒC<..>å’ŒC<...>æ˜¯é²œä¸ºäººçŸ¥çš„ç¿»è½¬è¿ç®—ç¬¦ï¼Œåœ¨ Perl 6ä¸­å®ƒä»¬è¢«
C<ff>å’Œ C<fff>å–ä»£äº†ã€‚

=head2 å­—ç¬¦ä¸²å†…æ’

åœ¨ Perl 5ï¼ŒC<"${foo}s">å°†å˜é‡åä»æ™®é€šçš„æ–‡æœ¬ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œ
åœ¨ Perl 6ä¸­ï¼Œç®€å•çš„å°†èŠ±æ‹¬å·æ‰©å±•åˆ°sigilå¤–å³å¯ï¼š C<"{$foo}s">ã€‚
è¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ªç®€å•çš„å†…æ’è¡¨è¾¾å¼ã€‚


=head1 å¤åˆè¯­å¥

=head2 æ¡ä»¶è¯­å¥

=head3 C<if> C<elsif> C<else> C<unless>

é™¤äº†æ¡ä»¶è¯­å¥ä¸¤è¾¹çš„æ‹¬å·ç°åœ¨æ˜¯å¯é€‰çš„ï¼Œè¿™äº›å…³é”®å­—å‡ ä¹æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯å¦‚æœè¦ä½¿ç”¨æ‹¬å·ï¼Œ
ä¸€å®šä¸è¦ç´§è·Ÿç€å…³é”®å­—ï¼Œ å¦åˆ™è¿™ä¼šè¢«å½“ä½œæ™®é€šçš„å‡½æ•°è°ƒç”¨ï¼Œç»‘å®šæ¡ä»¶è¡¨è¾¾å¼åˆ°ä¸€ä¸ªå˜é‡
ä¹Ÿç¨å¾®æœ‰ç‚¹å˜åŒ–ï¼š

    if (my $x = dostuff()) {...}  # Perl 5
    if dostuff() -> $x {...}      # Perl 6

ï¼ˆåœ¨Perl6ä¸­ä½ å¯ä»¥ç»§ç»­ä½¿ç”¨C<my>æ ¼å¼ï¼Œä½†æ˜¯å®ƒçš„ä½œç”¨åŸŸä¸å†ä½äºè¯­å¥å—çš„å†…éƒ¨ï¼Œè€Œæ˜¯å¤–éƒ¨ã€‚ï¼‰

åœ¨Perl6ä¸­C<unless>æ¡ä»¶è¯­å¥åªå…è®¸å•ä¸ªè¯­å¥å—ï¼Œä¸å…è®¸ C<elsif>æˆ–è€…C<else>å­è¯­å¥ã€‚

=head3 C<given>-C<when>

C<given>-C<when>ç»“æ„ç±»ä¼¼äºif-elsif-elseè¯­å¥æˆ–è€…Cé‡Œé¢çš„C<switch>-C<case>ç»“æ„ã€‚ å®ƒçš„æ™®é€š
æ ·å¼æ˜¯ï¼š

    given EXPR {
        when EXPR { ... }
        when EXPR { ... }
        default { ... }
    }

æ ¹æ®è¿™ä¸ªæœ€ç®€å•çš„æ ·å¼ï¼Œæœ‰å¦‚ä¸‹ä»£ç ï¼š

=for code :preamble<no strict;>
given $value {                   # assigns $_
    when "a match" {             # if $_ ~~ "a match"
        # do-something();
    }
    when "another match" {       # elsif $_ ~~ "another match"
        # do-something-else();
    }
    default {                    # else
        # do-default-thing();
    }
}

è¿™æ˜¯åœ¨C<when>è¯­å¥ä¸­ç®€å•çš„ä½¿ç”¨æ ‡é‡åŒ¹é…$_çš„åœºæ™¯,æ ‡é‡å€¼ç”±C<given>ç»™å‡ºï¼Œæ›´æ™®éçš„å®é™…æƒ…å†µéƒ½æ˜¯åˆ©ç”¨å¦‚æ­£åˆ™è¡¨è¾¾å¼ä¸€èˆ¬çš„
å¤æ‚çš„å®ä½“ç­‰æ›¿ä»£æ ‡é‡æ•°æ®å¯¹è¾“å…¥æ•°æ®è¿›è¡Œæ™ºèƒ½åŒ¹é…ã€‚

åŒæ—¶å‚é˜…æ–‡ç« ä¸Šé¢çš„æ™ºèƒ½åŒ¹é…æ“ä½œã€‚

=head2 å¾ªç¯

=head3 C<while> C<until>

é™¤äº†å¾ªç¯æ¡ä»¶ä¸¤è¾¹çš„æ‹¬å·ç°åœ¨æ˜¯å¯é€‰çš„ï¼Œè¿™äº›å…³é”®å­—å‡ ä¹æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯å¦‚æœè¦ä½¿ç”¨æ‹¬å·ï¼Œä¸€å®šä¸è¦
ç´§è·Ÿç€å…³é”®å­—ï¼Œ å¦åˆ™è¿™ä¼šè¢«å½“ä½œæ™®é€šçš„å‡½æ•°è°ƒç”¨ï¼Œç»‘å®šæ¡ä»¶è¡¨è¾¾å¼åˆ°ä¸€ä¸ªå˜é‡ä¹Ÿç¨å¾®æœ‰ç‚¹å˜åŒ–ï¼š

    while (my $x = dostuff()) {...}  # Perl 5
    while dostuff() -> $x {...}      # Perl 6

ï¼ˆåœ¨Perl6ä¸­ä½ å¯ä»¥ç»§ç»­ä½¿ç”¨C<my>æ ¼å¼ï¼Œä½†æ˜¯å®ƒçš„ä½œç”¨åŸŸä¸å†ä½äºè¯­å¥å—çš„å†…éƒ¨ï¼Œè€Œæ˜¯å¤–éƒ¨ã€‚ï¼‰

æ³¨æ„å¯¹æ–‡ä»¶å¥æŸ„æŒ‰è¡Œè¯»å–å‘ç”Ÿäº†å˜åŒ–ã€‚

åœ¨Perl5ï¼Œè¿™å¯ä»¥åˆ©ç”¨é’»çŸ³è¿ç®—ç¬¦åœ¨C<while>å¾ªç¯é‡Œé¢å®Œæˆï¼Œå¦‚æœä½¿ç”¨C<for>æ›¿ä»£C<while>åˆ™ä¼šæœ‰ä¸€ä¸ª
å¸¸è§çš„bugï¼Œå› ä¸ºC<for>å¯¼è‡´æ–‡ä»¶è¢«ä¸€æ¬¡æ€§è¯»å…¥ï¼Œä½¿ç¨‹åºçš„å†…å­˜ä½¿ç”¨å˜çš„å¾ˆç³Ÿç³•ã€‚

åœ¨ Perl 6ï¼ŒC<for>è¯­å¥æ˜¯æƒ°æ€§çš„ï¼ˆlazyï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨C<for>å¾ªç¯é‡Œé¢ä½¿ç”¨C<.lines>æ–¹æ³•é€è¡Œè¯»å–æ–‡ä»¶ï¼š


    while (<IN_FH>)  { } # Perl 5
=for code :preamble<no strict;>
    for $IN_FH.lines { } # Perl 6

éœ€è¦æ³¨æ„çš„è¿˜æœ‰ï¼ŒPerl 6 ä¸­çš„è¡Œé»˜è®¤è¢«C<chomp>çš„ã€‚

=head3 C<do> C<while>/C<until>

    do {
        ...
    } while $x < 10;

    do {
        ...
    } until $x >= 10;

è¿™ç§ç»“æ„å­˜åœ¨ï¼Œåªä¸è¿‡ä¸ºäº†æ›´å¥½çš„ä½“ç°è¿™ç§ç»“æ„çš„æ„ä¹‰,C<do>ç°åœ¨æ›¿æ¢æˆäº†C<repeat>ï¼š

    repeat {
        ...
    } while $x < 10;

    repeat {
        ...
    } until $x >= 10;

=head3 C<for> C<foreach>

é¦–å…ˆæ³¨æ„è¿™æœ‰ä¸€ä¸ªå¸¸è§çš„å¯¹C<for>å’ŒC<foreach>å…³é”®å­—çš„è¯¯è§£ï¼Œè®¸å¤šç¨‹åºå‘˜è®¤ä¸ºå®ƒä»¬æ˜¯æŠŠ
ä¸‰æ®µè¡¨è¾¾å¼çš„C-é£æ ¼å’Œåˆ—è¡¨è¿­ä»£æ–¹å¼åŒºåˆ†å¼€æ¥ï¼Œç„¶è€Œå¹¶ä¸æ˜¯ï¼ å®é™…ä¸Šï¼Œå®ƒä»¬æ˜¯å¯äº’æ¢çš„ï¼Œ
Perl5çš„ç¼–è¯‘å™¨é€šè¿‡æŸ¥æ‰¾åé¢çš„åˆ†å·æ¥å†³å®šè§£ææˆå“ªä¸€ç§å¾ªç¯ã€‚

Perl6 C-é£æ ¼çš„forå¾ªç¯ç”¨C<loop>å…³é”®å­—ï¼Œå…¶å®ƒéƒ½æ²¡æœ‰å˜åŒ–ï¼Œä¸¤è¾¹çš„æ‹¬å·æ˜¯å¿…é¡»çš„ï¼š

    for  ( my $i = 1; $i <= 10; $i++ ) { ... } # Perl 5
    loop ( my $i = 1; $i <= 10; $i++ ) { ... } # Perl 6

å¾ªç¯ç»“æ„C<for>æˆ–C<foreach>åœ¨Perl 6ä¸­ç»Ÿä¸€ä¸ºC<for>ï¼ŒC<foreach>ä¸å†æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼ŒC<for>è§„åˆ™å¦‚ä¸‹ï¼š

=item æ‹¬å·æ˜¯å¯é€‰çš„ã€‚
=item è¿­ä»£å˜é‡ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œå·²ç»ä»åˆ—è¡¨çš„å‰éƒ¨ç§»åŠ¨åˆ°åˆ—è¡¨çš„åé¢ï¼Œå˜é‡ä¹‹å‰è¿˜æœ‰åŠ ä¸Šç®­å¤´è¿ç®—ç¬¦ã€‚
=item è¿­ä»£å˜é‡ï¼Œç°åœ¨æ˜¯è¯æ³•å˜é‡ï¼ŒC<my>ä¸è½½éœ€è¦ï¼Œä¸”ä¸å…è®¸ä½¿ç”¨ã€‚
=item è¿­ä»£å˜é‡æ˜¯å½“å‰åˆ—è¡¨å…ƒç´ çš„åˆ«åï¼Œæ˜¯åªè¯»çš„ï¼ˆPerl5ä¸­åˆ«åå¯è¯»å†™ï¼‰ï¼Œé™¤éä½ å°† CÂ«->Â»æ”¹ä¸ºCÂ«<->Â»ã€‚ 
åšè€ä»£ç è¿ç§»çš„æ—¶å€™ï¼Œæ£€æŸ¥å¾ªç¯å˜é‡ï¼Œå†³å®šæ˜¯å¦éœ€è¦å¯è¯»å†™ã€‚

    for my $car (@cars)  {...} # Perl 5; è¯»å†™
    for @cars  -> $car   {...} # Perl 6; åªè¯»
    for @cars <-> $car   {...} # Perl 6; è¯»å†™

å¦‚æœä½¿ç”¨é»˜è®¤çš„å˜é‡ C<$_>ï¼Œå®ƒä¹Ÿå¯è¯»å†™çš„ã€‚

 =for code :lang<perl5>
    for (@cars)      {...} # Perl 5; $_å¯è¯»å†™
 =for code :preamble<no strict;>
    for @cars        {...} # Perl 6; $_ å¯è¯»å†™
    for @cars <-> $_ {...} # Perl 6; $_ å¯è¯»å†™

æˆ‘ä»¬ä¹Ÿèƒ½åœ¨æ¯æ¬¡å¾ªç¯ä¸­å–å¤šä¸ªå…ƒç´ ï¼Œåªéœ€åœ¨ç®­å¤´åé¢æ·»åŠ å¤šä¸ªå˜é‡å³å¯ã€‚

=begin code
my @array = 1..10;
for @array -> $first, $second {
    say "First is $first, second is $second";
}
=end code

=head4 C<each>

è¿™æ˜¯Perl6ä¸­å’ŒPerl5 C<whileâ€¦each(%hash)>æˆ–è€…C<whileâ€¦each(@array)>ï¼ˆéå†æ•°æ®ç»“æ„çš„é”®æˆ–è€…ç´¢å¼•å’Œå€¼ï¼‰
ç­‰åŒçš„ç”¨æ³•ï¼š

    while (my ($i, $v) = each(@array)) { ... } # Perl 5
    for @array.kv -> $i, $v { ... } # Perl 6

    while (my ($k, $v) = each(%hash)) { ... } # Perl 5
    for %hash.kv -> $k, $v { ... } # Perl 6

=head2 æµç¨‹æ§åˆ¶

æœªå˜åŒ–çš„:

=item C<next>
=item C<last>
=item C<redo>

=head3 C<continue>

C<continue>è¯­å¥å—å·²ç»è¢«å»æ‰äº†ï¼Œåšä¸ºæ›¿ä»£ï¼Œåœ¨å¾ªç¯ä½“ä¸­ä½¿ç”¨C<NEXT>è¯­å¥å—ï¼š

    # Perl 5
        my $str = '';
        for (1..5) {
            next if $_ % 2 == 1;
            $str .= $_;
        }
        continue {
            $str .= ':'
        }
    # Perl 6
        my $str = '';
        for 1..5 {
            next if $_ % 2 == 1;
            $str ~= $_;
            NEXT {
                $str ~= ':'
            }
        }

è¯·æ³¨æ„ï¼Œè¿™ç§è¯­æ³•å®é™…ä¸Šä¸éœ€è¦ä¸€ä¸ªå—ï¼Œå½“ä½ ä¸éœ€è¦é¢å¤–çš„èŒƒå›´æ—¶å€™ï¼Œè¿™éå¸¸æ–¹ä¾¿

=for code
# Perl 6
    my $str = '';
    for 1..5 {
        next if $_ % 2 == 1;
        $str ~= $_;
        NEXT $str ~= ':';
    }

=head1 å‡½æ•°

=comment æœªç»ç¡®è®¤: å½“å¢åŠ å‡½æ•°æ—¶å€™ï¼Œéœ€è¦ä»¥å­—æ¯è¡¨é¡ºåºæ·»åŠ 

=head2 å†…å»ºå‡½æ•°ä¸çº¯ä»£ç å—

å†…å»ºå‡½æ•°ä¹‹å‰æ¥å—ä¸€ä¸ªçº¯çš„ä»£ç å—ï¼Œä¸ç”¨åœ¨å…¶ä»–å‚æ•°ä¹‹å‰æ·»åŠ é€—å·ï¼Œç°åœ¨éœ€è¦åœ¨å—å’Œå‚æ•°
ä¹‹é—´æ’å…¥ä¸€ä¸ªé€—å·ï¼Œæ¯”å¦‚ C<map>, C<grep>ç­‰ç­‰ã€‚


    my @results = grep { $_ eq "bars" } @foo; # Perl 5
    my @results = grep { $_ eq "bars" }, @foo; # Perl 6


=head2 C<delete>

è¢«è½¬æ¢ä¸ºL<C<{}>å“ˆå¸Œä¸‹æ ‡è¿ç®—ç¬¦|{}_Hash_indexing/slicing>ä»¥åŠL<C<[]>æ•°ç»„ä¸‹æ ‡è¿ç®—ç¬¦|#[]_Array_indexing/slicing>
çš„å‰¯è¯ã€‚

    my $deleted_value = delete $hash{$key};  # Perl 5
    my $deleted_value = %hash{$key}:delete;  # Perl 6 - use :deleteå‰¯è¯

    my $deleted_value = delete $array[$i];  # Perl 5
    my $deleted_value = @array[$i]:delete;  # Perl 6 - use :deleteå‰¯è¯

=head2 C<exists>

è¢«è½¬æ¢ä¸ºL<C<{}>å“ˆå¸Œä¸‹æ ‡è¿ç®—ç¬¦|#{}_Hash_indexing/slicing> ä»¥åŠL<C<[]>æ•°ç»„ä¸‹æ ‡è¿ç®—ç¬¦|#[]_Array_indexing/slicing>
çš„å‰¯è¯ã€‚

    say "element exists" if exists $hash{$key};  # Perl 5
    say "element exists" if %hash{$key}:exists;  # Perl 6 - use :existså‰¯è¯

    say "element exists" if exists $array[$i];  # Perl 5
    say "element exists" if @array[$i]:exists;  # Perl 6 - use :existså‰¯è¯

=head1 æ­£åˆ™è¡¨è¾¾å¼

=head2 C<=~>å’ŒC<!~>æ›¿æ¢ä¸ºC<~~>å’ŒC<!~~> .

åœ¨ Perl5å¯¹å˜é‡çš„åŒ¹é…å’Œæ›¿æ¢æ˜¯ä½¿ç”¨C<=~>æ­£åˆ™ç»‘å®šè¿ç®—ç¬¦å®Œæˆçš„ã€‚
åœ¨ Perl6ä¸­ä½¿ç”¨æ™ºèƒ½åŒ¹é…è¿ç®—ç¬¦C<~~>æ›¿ä»£ã€‚

    next if $line  =~ /static/  ; # Perl 5
    next if $line  ~~ /static/  ; # Perl 6

    next if $line  !~ /dynamic/ ; # Perl 5
    next if $line !~~ /dynamic/ ; # Perl 6

    $line =~ s/abc/123/;          # Perl 5
    $line ~~ s/abc/123/;          # Perl 6

åŒæ ·çš„ï¼Œæ–°çš„C<.match>æ–¹æ³•ä»¥åŠC<.subst>æ–¹æ³•å¯ä»¥è¢«ä½¿ç”¨ã€‚ æ³¨æ„C<.subst>æ˜¯ä¸å¯å˜æ“ä½œï¼Œå‚è§
L<S05/Substitution|https://design.perl6.org/S05.html#Substitution>.

=head2 æ•æ‰å˜é‡ä»¥0å¼€å§‹, è€Œä¸æ˜¯1

    /(.+)/ and print $1; # Perl 5
    /(.+)/ and print $0; # Perl 6

=head2 ç§»åŠ¨ä¿®é¥°ç¬¦

å°†æ‰€æœ‰çš„ä¿®é¥°ç¬¦çš„ä½ç½®ä»å°¾éƒ¨ç§»åŠ¨åˆ°äº†å¼€å§‹ï¼Œè¿™å¯èƒ½éœ€è¦ä½ ä¸ºæ™®é€šçš„åŒ¹é…æ¯”å¦‚CÂ«/abc/Â»æ·»åŠ å¯é€‰çš„C<m>ã€‚

    next if $line =~    /static/i ; # Perl 5
    next if $line ~~ m:i/static/  ; # Perl 6

=head2 å¢åŠ :P5 æˆ–è€… :Perl5å‰¯è¯

å¦‚æœå®é™…çš„æ­£åˆ™è¡¨è¾¾å¼æ¯”è¾ƒå¤æ‚ï¼Œä½ å¯èƒ½ä¸æƒ³åšä¿®æ”¹ç›´æ¥ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±åŠ ä¸ŠC<P5>å‰¯è¯å§ã€‚

    next if $line =~    m/[aeiou]/   ; # Perl 5
    next if $line ~~ m:P5/[aeiou]/   ; # Perl 6, ä½¿ç”¨:P5å‰¯è¯
    next if $line ~~ m/  <[aeiou]> / ; # Perl 6, æ–°çš„é£æ ¼

éœ€è¦æ³¨æ„çš„æ˜¯Perl 5 æ­£åˆ™è¡¨è¾¾ç»å¹´å·²ä¹…ï¼ˆæ¶ä¸ä½éå¸¸å¥½ç”¨ï¼‰ï¼Œæœ‰å¾ˆå¤šæ–°åŠŸèƒ½åœ¨Perl 6å¼€å§‹åŠ å…¥ã€‚

=head2 ç‰¹æ®Šçš„åŒ¹é…è¯­æ³•é€šå¸¸å±äº<>çš„è¯­æ³•

Perl 5çš„æ­£åˆ™è¯­æ³•æ”¯æŒå¾ˆå¤šç‰¹æ®Šçš„åŒ¹é…è¯­æ³•ï¼Œå®ƒä»¬ä¸ä¼šå…¨éƒ¨åˆ—åœ¨è¿™é‡Œï¼Œä½†æ˜¯ä¸€èˆ¬åœ¨æ–­è¨€ä¸­ä½œä¸ºC<()>çš„æ›¿ä»£çš„æ˜¯CÂ«<>Â»ã€‚

å¯¹äºå­—ç¬¦ç±»ï¼Œè¿™æ„å‘³ç€ï¼š

=item C<[abc]> å˜æˆ CÂ«<[abc]>Â»

=item C<[^abc]> å˜æˆ CÂ«<-[abc]>Â»

=item C<[a-zA-Z]> å˜æˆ CÂ«<[a..zA..Z]>Â»

=item C<[[:upper:]]> å˜æˆ CÂ«<:Upper>Â»

=item C<[abc[:upper:]]> å˜æˆ CÂ«<[abc]+:Upper>Â»

å¯¹äºç¯è§†ï¼ˆlook-aroundï¼‰æ–­è¨€:

=item C<(?=[abc])> å˜æˆ CÂ«<?[abc]>Â»

=item C<(?=ar?bitrary* pattern)> å˜æˆ CÂ«<before ar?bitrary* pattern>Â»

=item C<(?!=[abc])> å˜æˆ CÂ«<![abc]>Â»

=item C<(?!=ar?bitrary* pattern)> å˜æˆ CÂ«<!before ar?bitrary* pattern>Â»

=item CÂ«(?<=ar?bitrary* pattern)Â» å˜æˆ CÂ«<after ar?bitrary* pattern>Â»

=item CÂ«(?<!ar?bitrary* pattern)Â» å˜æˆ CÂ«<!after ar?bitrary* pattern>Â»

ï¼ˆè·Ÿ<>è¯­æ³•æ— å…³ï¼Œç¯è§†è¯­æ³•C</foo\Kbar/>å˜æˆäº†CÂ«/foo <( bar )> /Â»ï¼‰

=item C<(?(?{condition))yes-pattern|no-pattern)> å˜æˆ CÂ«[ <?{condition}>
      yes-pattern | no-pattern ]Â»

=head2 ä»¤ç‰Œæœ€é•¿åŒ¹é…ï¼ˆLTMï¼‰å–ä»£å¤šé€‰ä¸€

åœ¨ Perl6çš„æ­£åˆ™ä¸­,C<|>ç”¨äºLTMï¼Œä¹Ÿå°±æ˜¯æ ¹æ®ä¸€ç»„åŸºäºæ¨¡ç³ŠåŒ¹é…è§„åˆ™ä»ç»“æœä¸­é€‰æ‹©
ä¸€ä¸ªæœ€ä¼˜çš„ç»“æœï¼Œè€Œä¸æ˜¯ä½ç½®ä¼˜å…ˆã€‚

å¯¹äº Perl 5ä»£ç æœ€ç®€å•è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨C<||>æ›¿ä»£C<|>ã€‚

ä½†æ˜¯ï¼Œå¦‚æœåŸºäºè®¾è®¡ä¸Šæˆ–è€…ç”±äºç–å¿½ç­‰çš„åŸå› å¯¼è‡´ä½ çš„C<||>æ­£åˆ™æ˜¯ç»§æ‰¿äºæˆ–è€…æ˜¯ç”±
C<|>ç‰‡æ®µçš„æ­£åˆ™ç»„æˆçš„ï¼Œç»“æœä¸å¯é¢„æœŸã€‚æ‰€ä»¥å¯¹ä¸€äº›å¤æ‚åœ°åŒ¹é…ï¼Œä½ å¿…é¡»å¯¹ä¸¤ç§è¯­æ³•
éƒ½ç†Ÿæ‚‰ï¼Œç‰¹åˆ«æ˜¯äº†è§£LTMçš„å·¥ä½œç­–ç•¥çš„æ—¶å€™ã€‚å¦å¤–C<|> è¯­æ³•é‡åˆ©ç”¨å¯èƒ½æ˜¯ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚

æ›´å¤šè§„åˆ™. è¯·ä½¿ç”¨æ¥è‡ªæ¨¡å—L<< C<translate_regex.pl> from Blue
Tiger|https://github.com/Util/Blue_Tiger/ >>ã€‚

=head3 æ³¨é‡Š

å’ŒPerl5ä¸€æ ·æ­£åˆ™æ³¨é‡Šï¼Œæ¯”å¦‚.

    / word #`(match lexical "word") /

=head1 ç¼–è¯‘æŒ‡ç¤ºï¼ˆPragmasï¼‰

=head3 C<strict>

é»˜è®¤å¯ç”¨è§„åˆ™ã€‚

=head3 C<warnings>

é»˜è®¤å¯ç”¨è§„åˆ™ã€‚

C<no warnings>ç›®å‰è¿˜æ˜¯L<NYI|/language/glossary#NYI>çŠ¶æ€ï¼Œ ä½†æ˜¯æŠŠè¯­å¥æ”¾åˆ°{}å—ä¹‹å†…å°±å¯ä»¥é¿å…è­¦å‘Šã€‚

=head3 C<autodie>

è¿™ä¸ªåŠŸèƒ½å¯ä»¥è®©ç¨‹åºåœ¨å‘ç”Ÿé”™è¯¯æŠ›å‡ºå¼‚å¸¸ï¼Œç°åœ¨Perl6é»˜è®¤è¿”å›C<Failure>å¯¹è±¡ï¼Œä½ å¯ä»¥å¯¹è‰¯å¥½å®šä¹‰å’Œå¯ä¿¡åœ°
çš„C<Failure>åšæµ‹è¯•ï¼Œè¿™æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚å¦‚æœé€šè¿‡å…¶ä»–æ–¹å¼ä½¿ç”¨C<Failure>ï¼Œåˆ™ä¼šæŠ›å‡ºC<Failure>æ‰“åŒ…çš„
C<Exception>å¯¹è±¡ã€‚ 

    # Perl 5
    open my $i_fh, '<', $input_path;  # é”™è¯¯æ—¶ä¿æŒæ²‰é»˜
    use autodie;
    open my $o_fh, '>', $output_path; # é”™è¯¯æ—¶æŠ›å‡ºå¼‚å¸¸

    # Perl 6
    my $i_fh = open $input_path,  :r; # é”™è¯¯æ—¶æŠ›å‡ºFailure
    my $o_fh = open $output_path, :w; # é”™è¯¯æ—¶æŠ›å‡ºFailure

å› ä¸ºä½ å¯ä»¥æµ‹è¯•C<Failure>ï¼Œä½ å¯ä»¥åœ¨<if> è¯­å¥ä¸­å¯¹C<open>æ“ä½œè¿›è¡Œåˆ¤æ–­ã€‚

=for code :preamble<no strict;>
# Perl 6
if open($input_path,:r) -> $handle {
    .say for $handle.lines;
}
else {
    # éå¸¸ä¼˜é›…å¯¹open()å¤±è´¥çš„ç»“æœè¿›è¡Œå¤„ç†
}

=head3 C<base>
=head3 C<parent>

ç°åœ¨C<use base>å’ŒC<use parent>å·²ç»è¢« Perl 6ä¸­çš„ C<is>å…³é”®å­—å–ä»£ï¼Œç”¨åœ¨ç±»çš„å£°æ˜ä¸­ã€‚

    # Perl 5
    package Cat;
    use base qw(Animal);

=for code :preamble<class Animal {}>
    # Perl 6
    class Cat is Animal{};

æ³¨æ„åˆ°C<Animal>ç±»å¿…é¡»åœ¨ç¼–è¯‘æ—¶è¢«æ„ŸçŸ¥ï¼Œæ‰èƒ½å¯¹å…¶è¿›è¡Œç»§æ‰¿ã€‚

=head3 C<bigint> C<bignum> C<bigrat>

ä¸å†æœ‰ç›¸åº”çš„ç±»å‹äº†ã€‚

C<Int>ç°åœ¨æ˜¯æ— é™ç²¾åº¦çš„ï¼Œæ˜¯ C<Rat>ç±»å‹çš„åˆ†å­ï¼ˆåˆ†æ¯æœ€å¤§å¯ä»¥æ˜¯C<2**64>ï¼Œå‡ºäºæ€§èƒ½è€ƒè™‘ä¹‹åä¼š
è‡ªåŠ¨è½¬æ¢ä¸ºC<Num>ç±»å‹ï¼‰ã€‚ å¦‚æœä½ æƒ³ä½¿ç”¨æ— é™ç²¾åº¦åˆ†æ¯çš„C<Rat>é‚£ä¹ˆC<FatRat>æ˜¾ç„¶æ˜¯æœ€é€‚åˆçš„ã€‚

=head3 X<C<constant>|constant>

C<constant>åœ¨Perl6ç”¨æ¥å˜é‡å£°æ˜ï¼Œè¿™ç±»ä¼¼ä¸C<my>ï¼Œä¸è¿‡å˜é‡ä¼šé”å®šä¿æŒç¬¬ä¸€æ¬¡åˆå§‹åŒ–çš„å€¼ä¸å˜
ï¼ˆåœ¨ç¼–è¯‘æ—¶æœŸæ±‚å€¼ï¼‰ã€‚

é‚£ä¹ˆï¼Œå°†CÂ«=>Â»æ”¹ä¸ºC<=>ï¼Œå¹¶åŠ ä¸Šä¸€ä¸ªsigilã€‚

=for code :lang<perl5>
    use constant DEBUG => 0; # Perl 5

=for code
    constant DEBUG = 0;      # Perl 6
=for code :lang<perl5>
    use constant pi => 4 * atan2(1, 1); # Perl 5
=for code
    tau, pi, e, i; # pi, e, iéƒ½æ˜¯ Perl 6çš„å†…å»ºå˜é‡
    Ï„, Ï€, ğ‘’        # ç›¸åº”çš„Unicode
 
=head3 C<encoding>

å…è®¸ä½¿ç”¨éASCIIæˆ–è€…éUTF8ç¼–ç ç¼–å†™ä»£ç ã€‚

=head3 C<integer>

Perlçš„ç¼–è¯‘æŒ‡ç¤ºï¼Œä½¿ç”¨æ•´æ•°è¿ç®—æ›¿ä»£æµ®ç‚¹ã€‚Perl 6ä¸­æ— å¯¹åº”è¯­æ³•ï¼Œ
å¦‚æœä½ è®¡ç®—ä¸­ä½¿ç”¨çº¯æ•´å‹è®¡ç®—ï¼Œåˆ™æ˜¯æœ€è´´è¿‘çš„ã€‚

=for code
my int $foo = 42;
my int $bar = 666;
say $foo * $bar;    # ä½¿ç”¨çº¯æ•´å‹çš„ä¹˜æ³•

=head3 C<lib>

åœ¨ç¼–è¯‘æ—¶æŸ¥æ‰¾çš„æ—¶å€™æ“ä½œã€‚åº•å±‚é€»è¾‘å’ŒPerl 5æœ‰<å¾ˆå¤§>ä¸åŒï¼Œä½†æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹C<use lib>
å’ŒPerl5ä¸­çš„å¹¶æ²¡æœ‰ä¸¤æ ·ã€‚ 

=head3 C<mro>

ä¸å†æœ‰æ„ä¹‰ã€‚

åœ¨Perl6ä¸­ï¼Œæ–¹æ³•è°ƒç”¨ç°åœ¨ä½¿ç”¨ C3 æ–¹æ³•è°ƒç”¨é¡ºåºã€‚

å¦‚æœä½ éœ€è¦æ‰¾å‡ºä¸€ä¸ªç±»çš„çˆ¶ç±»ï¼Œä½ å¯ä»¥æ¿€æ´»C<mro>åŸå­æ–¹æ³•ï¼š

=for code :preamble<class Animal {}>
say Animal.^mro;    # .^ è¡¨ç¤ºå¯¹å¯¹è±¡è°ƒç”¨ä¸€ä¸ªåŸå­æ–¹æ³•ã€‚

=head3 C<utf8>

ä¸å†æœ‰æ„ä¹‰ã€‚

åœ¨Perl6ä¸­ï¼Œæºä»£ç å°†ä½¿ç”¨utf8ç¼–ç ã€‚

=head3 C<vars>

åœ¨Perl5ä¸­ä¸å†å»ºè®®ä½¿ç”¨ï¼Œå‚è§L<http://perldoc.perl.org/vars.html>.

åœ¨ç¿»è¯‘åˆ°Perl6ä»£ç ä¹‹å‰ï¼Œä½ å¯èƒ½éœ€è¦é‡æ„ä½ çš„ä»£ç ç§»é™¤å¯¹C<use vars>çš„ä½¿ç”¨

=head1 å‘½ä»¤è¡Œæ ‡è®°

æŸ¥çœ‹
L<S19/commandline|https://design.perl6.org/S19.html#Command_Line_Elements>

ä¸ºå˜åŒ–çš„:

-c -e -h -I -n -p -S -T -v -V

=head3 C<-a>

ä½ éœ€è¦æ‰‹åŠ¨è°ƒç”¨C<.split>ã€‚

=head3 C<-F>

ä½ éœ€è¦æ‰‹åŠ¨è°ƒç”¨C<.split>ã€‚

=head3 C<-l>

ç°åœ¨é»˜è®¤é€‰é¡¹ï¼Œä¸éœ€è¦æ˜¾ç¤ºæŒ‡å®šã€‚

=head3 C<-M> C<-m>

åªæœ‰C<-M>è¿˜å­˜åœ¨ï¼Œè¿˜æœ‰ï¼Œå¤§å®¶å¯ä»¥ä¸å†ä½¿ç”¨â€œno Moduleâ€è¯­æ³•äº†ï¼ŒC<-M>çš„â€œnoâ€æ¨¡å—æ“ä½œä¸å†å¯ç”¨ã€‚

=head3 C<-E>

å› ä¸ºæ‰€æœ‰çš„ç‰¹æ€§éƒ½å·²ç»å¼€å¯ï¼Œè¯·ä½¿ç”¨å°å†™çš„C<-e>ã€‚

=head3 C<-d>, C<-dt>, C<-d:foo>, C<-D>,ç­‰ç­‰.

è¢« ++BUG å…ƒè¯­æ³•æ›¿ä»£ã€‚

=head3 -s

å¼€å…³é€‰é¡¹è§£æç°åœ¨è¢« C<MAIN>å­ä¾‹ç¨‹çš„å‚æ•°åˆ—è¡¨æ›¿ä»£ã€‚

=for code :lang<perl5>
    # Perl 5
        #!/usr/bin/perl -s
        if ($xyz) { print "$xyz\n" }
    ./example.pl -xyz=5
    5

    # Perl 6
        sub MAIN( Int :$xyz ) {
            say $xyz if $xyz.defined;
        }
    perl6 example.p6 --xyz=5
    5
    perl6 example.p6 -xyz=5
    5

=item C<-t>

ç°åœ¨è¿˜æ²¡æœ‰æŒ‡å®šã€‚

=item C<-P> C<-u> C<-U> C<-W> C<-X>

å·²ç§»å‡ºï¼Œè¯¦æƒ…è¯·çœ‹L<S19#Removed Syntactic
Features|https://design.perl6.org/S19.html#Removed_Syntactic_Features>.

=item C<-w>

ç°åœ¨é»˜è®¤å¼€å¯ã€‚

=head1 æ–‡ä»¶ç›¸å…³æ“ä½œç¬¦

=head2 æŒ‰è¡Œè¯»å–æ–‡æœ¬æ–‡ä»¶åˆ°æ•°ç»„

åœ¨Perl5ï¼Œè¯»å–æ–‡æœ¬æ–‡ä»¶çš„è¡Œé€šå¸¸æ˜¯è¿™æ ·å­ï¼š

=for code :lang<perl5>
    open my $fh, "<", "file" or die "$!";
    my @lines = <$fh>; # è¡Œæ²¡æœ‰ç»è¿‡chompå¤„ç†
    close $fh;

åœ¨Perl6ï¼Œè¿™ç®€åŒ–æˆäº†è¿™æ ·ï¼š

    my @lines = "file".IO.lines; # è‡ªåŠ¨chomp

ä¸è¦å°è¯•ä¸€æ¬¡è¯»å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨æ¢è¡Œç¬¦åˆ†å‰²ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´æ•°ç»„å°¾éƒ¨å«æœ‰ä¸€ä¸ªç©ºè¡Œï¼Œ
æ¯”ä½ æƒ³è±¡çš„å¤šäº†ä¸€è¡Œï¼ˆå®ƒå®é™…æ›´å¤æ‚ä¸€äº›ï¼‰ã€‚æ¯”å¦‚ï¼š

    # åˆå§‹åŒ–è¦è¯»çš„æ–‡ä»¶
    spurt "test-file", q:to/END/;
    first line
    second line
    third line
    END
    # è¯»æ–‡ä»¶
    my @lines = "test-file".IO.slurp.split(/\n/);
    say @lines.elems;    #-> 4

å¦‚æœå¤„äºæŸç§åŸå› ä½ æƒ³é¦–å…ˆslurpæ–‡ä»¶ï¼Œä½ å¯ä»¥å¯¹å…¶ç»“æœè°ƒç”¨C<lines>æ–¹æ³•è·å¾—è¡Œæ•°ï¼š

    my @lines = "test-file".IO.slurp.lines;  # ä¹Ÿè‡ªåŠ¨chomp

=head2 æ•è·å¯æ‰§è¡Œæ–‡ä»¶çš„æ ‡å‡†è¾“å‡º

é‰´äºåœ¨Perl5ä½ å¯èƒ½è¿™ä¹ˆåšï¼š

    my $arg = 'Hello';
    my $captured = `echo \Q$arg\E`;
    my $captured = qx(echo \Q$arg\E);

æˆ–è€…ä½¿ç”¨String::ShellQuoteï¼ˆå› ä¸º C<\Qâ€¦\E>ä¸æ˜¯å®Œå…¨æ­£ç¡®çš„ï¼‰ï¼š

    my $arg = shell_quote 'Hello';
    my $captured = `echo $arg`;
    my $captured = qx(echo $arg);

åœ¨ Perl 6ä¸­ä½ å¯èƒ½æƒ³ä¸é€šè¿‡shell è¿è¡Œå‘½ä»¤ï¼š

    my $arg = 'Hello';
    my $captured = run('echo', $arg, :out).out.slurp-rest;
    my $captured = run(Â«echo "$arg"Â», :out).out.slurp-rest;

å¦‚æœä½ çœŸçš„æƒ³ç”¨ shell ä¹Ÿå¯ä»¥ï¼š

    my $arg = 'Hello';
    my $captured = shell("echo $arg", :out).out.slurp-rest;
    my $captured = qqx{echo $arg};

ä½†æ˜¯å½“å¿ƒï¼Œè¿™ç§æƒ…å†µä¸‹ B<å®Œå…¨æ²¡æœ‰äº†ä¿æŠ¤>!ï¼Œ C<run>ä¸ä½¿ç”¨C<shell>æ‰§è¡Œå‘½ä»¤ï¼Œ
æ‰€ä»¥ä¸éœ€è¦å¯¹å‚æ•°è¿›è¡Œè½¬ä¹‰ï¼ˆç›´æ¥è¿›è¡Œä¼ é€’ï¼‰ã€‚ å¦‚æœä½ ä½¿ç”¨C<shell>æ‰§æˆ–è€…C<qqx> ï¼Œ
é‚£ä¹ˆæ‰€æœ‰ä¸œè¥¿éƒ½ä¼šä½œä¸ºä¸€ä¸ªé•¿é•¿çš„å­—ç¬¦ä¸²ä¼ ç»™ shellï¼Œé™¤éä½ å°å¿ƒçš„ éªŒè¯ä½ çš„å‚æ•°ï¼Œ
å¦åˆ™å¾ˆæœ‰å¯èƒ½å› ä¸ºè¿™æ ·çš„ä»£ç å¼•å…¥ shell æ³¨å…¥æ¼æ´ã€‚

=head1 ç¯å¢ƒå˜é‡

=head2 Perl æ¨¡å—è·¯å¾„

åœ¨Perl5ä¸­å¯ä»¥æŒ‡å®š Perl æ¨¡å—çš„é¢å¤–çš„æœç´¢è·¯å¾„çš„ä¸€ä¸ªç¯å¢ƒå˜é‡æ˜¯C<PERL5LIB>ï¼š

    $ PERL5LIB="/some/module/lib" perl program.pl

åœ¨Perl6ä¸­ä¹Ÿç±»ä¼¼ï¼Œä»…ä»…éœ€è¦æ”¹å˜ä¸€ä¸ªæ•°å­—ï¼Œæ­£å¦‚ä½ æƒ³çš„é‚£æ ·ï¼Œä½ åªéœ€ä½¿ç”¨X<C<PERL6LIB>|PERL6LIB>ï¼š

    $ PERL6LIB="/some/module/lib" perl6 program.p6

åœ¨ Perl5ä¸­ä½¿ç”¨å†’å·â€˜:â€™ä½œä¸ºC<PERL5LIB>ç›®å½•çš„åˆ†éš”ç¬¦ï¼Œä½†æ˜¯åœ¨Perl6ä¸­ä½¿ç”¨é€—å· â€˜,â€™ã€‚ æ¯”å¦‚ï¼š

ä¸æ˜¯

    $ export PERL5LIB=/module/dir1:/module/dir2;

è€Œæ˜¯

    $ export PERL6LIB=/module/dir1,/module/dir2;

ï¼ˆPerl6ä¸è¯†åˆ«C<PERL5LIB>æˆ–è€…æ›´è€çš„Perlç¯å¢ƒå˜é‡C<PERLLIB>ã€‚ï¼‰

å°±Perl6æ¥è¯´ï¼Œå¦‚æœä½ ä¸æŒ‡å®šC<PERL6LIB>ï¼Œä½ éœ€è¦ä½¿ç”¨C<use lib>ç¼–è¯‘æŒ‡ç¤ºæ¥æŒ‡å®šåº“çš„è·¯å¾„ï¼š

    use lib '/some/module/lib'

æ³¨æ„C<PERL6LIB>åœ¨Perl6ä¸­æ›´å¤šçš„æ˜¯ç»™å¼€å‘è€…æä¾›ä¾¿åˆ©ï¼ˆä¸Perl5ä¸­çš„C<PERL5LIB>ç›¸å¯¹åº”ï¼‰ï¼Œ 
æ¨¡å—çš„ç”¨æˆ·ä¸è¦ä½¿ç”¨å› ä¸ºæœªæ¥å®ƒå¯èƒ½è¢«åˆ é™¤ï¼Œè¿™æ˜¯å› ä¸ºPerl6çš„æ¨¡å—åŠ è½½æ²¡æœ‰ç›´æ¥å…¼å®¹æ“ä½œç³»ç»Ÿçš„è·¯å¾„ã€‚

=head1 æ‚é¡¹

=head2 C<'0'> æ˜¯True

ä¸åƒPerl5ï¼Œä¸€ä¸ªåªåŒ…å«('0')çš„å­—ç¬¦ä¸²æ˜¯Trueï¼Œä½œä¸ºPerl6çš„æ ¸å¿ƒç±»å‹ï¼Œå®ƒæœ‰ç€æ›´å¤šçš„æ„ä¹‰ï¼Œ 
è¿™æ„å‘³ç€å¸¸è§çš„æ¨¡å¼ï¼š

    ... if defined $x and length $x; # æˆ–è€…ç°ä»£Perlçš„å†™æ³•length($x)

åœ¨Perl6é‡Œé¢å˜çš„æ›´ä¸ºç®€åŒ–ï¼š

    ... if $x;

=head2 C<dump>

è¢«ç§»é™¤ã€‚
Perl 6çš„è®¾è®¡å…è®¸è‡ªåŠ¨çš„ä¿å­˜åŠ è½½ç¼–è¯‘çš„å­—èŠ‚ç ã€‚
ç›®å‰è¿™ä¸ªåŠŸèƒ½åœ¨ Rakudo ä¸­åªæ”¯æŒæ¨¡å—ã€‚

=head2 AUTOLOAD

The LÂ«C<FALLBACK> method|/language/typesystem#index-entry-FALLBACK_(method)Â»
æä¾›äº†ç±»ä¼¼çš„åŠŸèƒ½ã€‚

=head2 å¯¼å…¥æ¨¡å—çš„å‡½æ•°
X<|import>

åœ¨Perl5ä½ å¯ä»¥åƒè¿™æ ·æœ‰é€‰æ‹©æ€§çš„å¯¼å…¥ä¸€ä¸ªç»™å®šæ¨¡å—çš„å‡½æ•°ï¼š

    use ModuleName qw{foo bar baz};

åœ¨Perl6ï¼Œä¸€ä¸ªæƒ³è¦è¢«å¯¼å‡ºçš„å‡½æ•°éœ€è¦å¯¹ç›¸å…³çš„æ–¹æ³•ä½¿ç”¨C<is export>ï¼Œæ‰€æœ‰ä½¿ç”¨C<is export>ï¼Œ
çš„æ–¹æ³•éƒ½ä¼šè¢«å¯¼å‡ºï¼Œå› æ­¤,ä¸‹é¢çš„æ¨¡å—C<Bar>å¯¼å‡ºäº†æ–¹æ³•C<foo>å’ŒC<bar>ï¼Œæ²¡æœ‰å¯¼å‡ºC<baz>ï¼š

    unit module Bar;

    sub foo($a) is export { say "foo $a" }
    sub bar($b) is export { say "bar $b" }
    sub baz($z) { say "baz $z" }

ä½¿ç”¨æ¨¡å—æ—¶ï¼Œç®€å•çš„C<use Bar>å³å¯ï¼Œç°åœ¨å‡½æ•°C<foo>å’ŒC<bar>éƒ½æ˜¯å¯ç”¨çš„ï¼š

    use Bar;
    foo(1);    #=> "foo 1"
    bar(2);    #=> "bar 2"

å¦‚æœä½ å°è¯•è°ƒç”¨C<baz>å‡½æ•°ï¼Œä¼šåœ¨ç¼–è¯‘æ—¶æŠ¥å‡ºâ€œæœªå®šä¹‰çš„ä¾‹ç¨‹â€é”™è¯¯ã€‚

æ‰€ä»¥ï¼Œå¦‚ä½•åƒPerl5é‚£æ ·å¯é€‰æ‹©æ€§çš„å¯¼å…¥ä¸€ä¸ªæ¨¡å—çš„å‡½æ•°å‘¢ï¼Ÿæ”¯æŒè¿™ä¸ªä½ éœ€è¦åœ¨æ¨¡å—ä¸­
å®šä¹‰C<EXPORT>æ–¹æ³•æ¥æŒ‡å®šå¯¼å‡ºå’Œåˆ é™¤C<module Bar>çš„å£°æ˜ ã€‚

æ¨¡å—C<Bar>ç°åœ¨ä»…ä»…æ˜¯ä¸€ä¸ªå«åš Bar.pm çš„æ–‡ä»¶å¹¶å«æœ‰ä»¥ä¸‹å†…å®¹ï¼š

    use v6.c;

    sub EXPORT(*@import-list) {
        my %exportable-subs =
            '&foo' => &foo,
            '&bar' => &bar,
            ;
        my %subs-to-export;
        for @import-list -> $import {
            if grep $sub-name, %exportable-subs.keys {
                %subs-to-export{$sub-name} = %exportable-subs{$sub-name};
            }
        }
        return %subs-to-export;
    }

    sub foo($a, $b, $c) { say "foo, $a, $b, $c" }
    sub bar($a) { say "bar, $a" }
    sub baz($z) { say "baz, $z" }

æ³¨æ„ç°åœ¨æ–¹æ³•å·²ä¸å†ä½¿ç”¨C<is export>æ˜¾å¼çš„å¯¼å‡ºï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªC<EXPORT>æ–¹æ³•ï¼Œå®ƒæŒ‡å®šäº†
æ¨¡å—å¯ä»¥è¢«å¯¼å‡ºçš„æ–¹æ³•ï¼Œå¹¶ä¸”ç”Ÿæˆä¸€ä¸ªåŒ…å«å®é™…è¢«å¯¼å‡ºçš„æ–¹æ³•çš„å“ˆå¸Œï¼ŒC<@import-list>æ˜¯è°ƒç”¨
ä»£ç ä¸­ä½¿ç”¨C<use>è¯­å¥è®¾ç½®çš„ï¼Œ è¿™å…è®¸æˆ‘ä»¬å¯é€‰æ‹©æ€§çš„å¯¼å‡ºæ¨¡å—ä¸­å¯å¯¼å‡ºçš„æ–¹æ³•ã€‚

æ‰€ä»¥ï¼Œä¸ºäº†åªå¯¼å‡ºC<foo>ä¾‹ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆä½¿ç”¨ï¼š

    use Bar <foo>;
    foo(1);       #=> "foo 1"

ç°åœ¨æˆ‘ä»¬å‘ç°å³ä½¿C<bar>æ˜¯å¯å¯¼å‡ºçš„ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æ˜¾å¼çš„å¯¼å‡ºå®ƒï¼Œå®ƒå°±ä¸ä¼šå¯ç”¨ï¼Œå› æ­¤ä¸‹é¢çš„ä»£ç åœ¨ 
ç¼–è¯‘æ—¶ä¼šå¼•èµ·â€œæœªå®šä¹‰çš„ä¾‹ç¨‹â€é”™è¯¯ï¼š

    use Bar <foo>;
    foo(1);
    bar(5);       # æŠ¥é”™ "Undeclared routine: bar used at line 3"

ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š

    use Bar <foo bar>;
    foo(1);       #=> "foo 1"
    bar(5);       #=> "bar 5"

æ³¨æ„ï¼ŒC<baz>ä¾ç„¶æ˜¯ä¸å¯å¯¼å‡ºçš„å³ä½¿ä½¿ç”¨C<use>æŒ‡å®šï¼š

    use Bar <foo bar baz>;
    baz(3);       # æŠ¥é”™ "Undeclared routine: baz used at line 2"

ä¸ºäº†ä½¿è¿™ä¸ªèƒ½æ­£å¸¸å·¥ä½œï¼Œæ˜¾ç„¶éœ€è¦è·¨è¶Šè®¸å¤šçš„éšœç¢ï¼Œåœ¨ä½¿ç”¨æ ‡å‡†useçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ä½¿ç”¨C<is export>
æŒ‡å®šæŸä¸€ä¸ªå‡½æ•°æ˜¯å¯¼å‡ºçš„ï¼Œ Perl 6ä¼šè‡ªåŠ¨ä»¥æ­£ç¡®çš„æ–¹å¼åˆ›å»º EXPORT æ–¹æ³•ï¼Œæ‰€ä»¥ä½ åº”è¯¥ä»”ç»†çš„è€ƒè™‘
åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„ C<EXPORT>æ–¹æ³•æ˜¯å¦å€¼å¾—ã€‚

=head2 ä»æ¨¡å—ä¸­å¼•å…¥çš„ä¸€ç»„ç‰¹å®šå‡½æ•°

å¦‚æœä½ å–œæ¬¢ä»æ¨¡å—å¼•å…¥ä¸€ç»„å‡½æ•°ï¼Œä½ åªéœ€åœ¨ç»„é‡Œæ·»åŠ å‡½æ•°åï¼Œå…¶ä»–å·¥ä½œä¼šè‡ªåŠ¨å®Œæˆã€‚
å½“ä½ åœ¨ä¸€ä¸ªå­ä¾‹ç¨‹ä¸­æŒ‡å®š C<is export>æ—¶ï¼Œä½ å®é™…ä¸Šæ·»åŠ è¿™ä¸ªå­ä¾‹ç¨‹ç»™C<:DEFAULT>è¾“å‡ºç»„ã€‚
ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå­ä¾‹ç¨‹ç»™å…¶ä»–ç»„ï¼Œæˆ–è€…å¤šä¸ªç»„ã€‚

=for code :skip-test
unit module Bar;
sub foo() is export { }                   # é»˜è®¤æ·»åŠ åˆ° :DEFAULT
sub bar() is export(:FNORBL) { }          # æ·»åŠ åˆ°FNORBLè¾“å‡ºç§Ÿ
sub baz() is export(:DEFAULT:FNORBL) { }  # æ·»åŠ ç»™ä¸¤ä¸ªç»„

æ‰€ä»¥ä½ å¯ä»¥ä½¿ç”¨ C<Bar>æ¨¡å—ï¼Œä»¥ä¸‹é¢çš„æ–¹å¼

=for code :skip-test
use Bar;                     # å¼•å…¥ foo / baz
use Bar :FNORBL;             # å¼•å…¥ bar / baz
use Bar :ALL;                # å¼•å…¥ foo / bar / baz

æ³¨æ„åˆ°C<:ALL>æ˜¯ä¸€ä¸ªè‡ªåŠ¨åˆ›å»ºçš„ç»„ï¼Œè¯¥ç»„åŒ…å«æ‰€æœ‰æ–¹æ³•ã€‚

=head1 æ ¸å¿ƒæ¨¡å—

=head3 C<Data::Dumper>

åœ¨Perl5ï¼ŒL<Data::Dumper|https://metacpan.org/pod/Data::Dumper>æ¨¡å—è¢«ç”¨æ¥åºåˆ—åŒ–ï¼Œ è¿˜æœ‰ç¨‹åºå‘˜
è°ƒè¯•çš„æ—¶å€™ç”¨æ¥æŸ¥çœ‹ç¨‹åºæ•°æ®ç»“æ„çš„å†…å®¹ã€‚

åœ¨Perl6ä¸­ï¼Œè¿™ä¸ªä»»åŠ¡å®Œå…¨è¢«å­˜åœ¨äºæ¯ä¸€ä¸ªå¯¹è±¡çš„C<.perl>æ–¹æ³•æ›¿ä»£ã€‚

    # ç»™å®š:
        my @array_of_hashes = (
            { NAME => 'apple',   type => 'fruit' },
            { NAME => 'cabbage', type => 'no, please no' },
        );
    # Perl 5
        use Data::Dumper;
        $Data::Dumper::Useqq = 1;
        print Dumper \@array_of_hashes; # æ³¨æ„åæ–œæ 
    # Perl 6
        say @array_of_hashes.perl; # .perlä¼šä½œç”¨åœ¨æ•°ç»„è€Œä¸æ˜¯å¼•ç”¨ä¸Šé¢

åœ¨Perl5ï¼ŒData::Dumperæœ‰ç€æ›´å¤æ‚çš„å¯é€‰çš„è°ƒç”¨çº¦å®šï¼Œ å®ƒæ”¯æŒå¯¹å˜é‡å‘½åã€‚

åœ¨Perl6ï¼Œå°†ä¸€ä¸ªå†’å·æ”¾åœ¨å˜é‡çš„sigilå‰é¢è½¬æ¢å®ƒä¸ºPairï¼ŒPairçš„é”®æ˜¯å˜é‡çš„åå­—ï¼Œå€¼æ˜¯å˜é‡çš„å€¼ã€‚

    # ç»™å®š:
        my ( $foo, $bar ) = ( 42, 44 );
        my @baz = ( 16, 32, 64, 'Hike!' );
    # Perl 5
        use Data::Dumper;
        print Data::Dumper->Dump(
            [     $foo, $bar, \@baz   ],
            [ qw(  foo   bar   *baz ) ],
        );
    # ç»“æœ
        $foo = 42;
        $bar = 44;
        @baz = (
                 16,
                 32,
                 64,
                 'Hike!'
               );
=begin code :preamble<no strict;>
    # Perl 6
        say [ :$foo, :$bar, :@baz ].perl;
    # ç»“æœï¼šÂ«["foo" => 42, "bar" => 44, "baz" => [16, 32, 64, "Hike!"]]â¤Â»
=end code

è¿˜æœ‰ä¸€ä¸ªç»™å¼€å‘è€…å‡†å¤‡çš„Rakudo-specificè¾…åŠ©è°ƒè¯•å‡½æ•°C<dd>ï¼ˆç®€åŒ–ç‰ˆçš„æ•°æ®Dumperï¼‰ï¼Œå®ƒä¼šæ‰“å°C<.perl>
çš„å†…å®¹ä»¥åŠé¢å¤–åº•å±‚ä¿¡æ¯ï¼Œåœ¨æ ‡å‡†é”™è¯¯ç»™å‡ºå˜é‡ä¿¡æ¯ã€‚

=begin code :preamble<no strict;> :ok-test<dd>
# Perl 6
dd $foo, $bar, @baz;
# OUTPUT: Â«Int $foo = 42â¤Int $bar = 44â¤Array @baz = [16, 32, 64, "Hike!"]â¤Â»
 =end code

=head3 C<Getopt::Long>

å¼€å…³é€‰é¡¹è§£æç°åœ¨è¢« MAIN å­æ–¹æ³•çš„å‚æ•°åˆ—è¡¨æ›¿ä»£ã€‚

    # Perl 5
        use 5.010;
        use Getopt::Long;
        GetOptions(
            'length=i' => \( my $length = 24       ), # numeric
            'file=s'   => \( my $data = 'file.dat' ), # string
            'verbose'  => \( my $verbose           ), # flag
        ) or die;
        say $length;
        say $data;
        say 'Verbosity ', ($verbose ? 'on' : 'off') if defined $verbose;
    perl example.pl
        24
        file.dat
    perl example.pl --file=foo --length=42 --verbose
        42
        foo
        Verbosity on

    perl example.pl --length=abc
        Value "abc" invalid for option length (number expected)
        Died at c.pl line 3.

    # Perl 6
        sub MAIN( Int :$length = 24, :file($data) = 'file.dat', Bool :$verbose ) {
            say $length if $length.defined;
            say $data   if $data.defined;
            say 'Verbosity ', ($verbose ?? 'on' !! 'off');
        }
    perl6 example.p6
        24
        file.dat
        Verbosity off
    perl6 example.p6 --file=foo --length=42 --verbose
        42
        foo
        Verbosity on
    perl6 example.p6 --length=abc
        Usage:
          c.p6 [--length=<Int>] [--file=<Any>] [--verbose]

æ³¨æ„åˆ°Perl6ä¼šåœ¨å‘½ä»¤è¡Œè§£æå‡ºé”™æ—¶è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„ç”¨æ³•ä¿¡æ¯ã€‚

=head1 è‡ªåŠ¨ç¿»è¯‘

ä¸€ä¸ªå¿«é€Ÿçš„å°†Perl5ä»£ç ç¿»è¯‘ä¸ºPerl6ä»£ç çš„é€”å¾„å°±æ˜¯é€šè¿‡è‡ªåŠ¨åŒ–ç¿»è¯‘ã€‚

B<æ³¨æ„:> è¿™äº›ç¿»è¯‘å™¨éƒ½è¿˜æ²¡æœ‰å®Œæˆ.

=head2 Blue Tige

æœ¬é¡¹ç›®çš„ç›®è‡´åŠ›äºè‡ªåŠ¨ç°ä»£åŒ–Perlä»£ç ï¼Œå®ƒæ²¡æœ‰ä¸€ä¸ªwebå‰ç«¯ï¼Œæ‰€ä»¥å¿…é¡»
æœ¬åœ°å®‰è£…ä½¿ç”¨ï¼Œå®ƒè¿˜å«æœ‰ä¸€ä¸ªå•ç‹¬çš„ç¨‹åºç”¨æ¥å°†Perl5çš„æ­£åˆ™è½¬æ¢ä¸ºPerl6çš„ç‰ˆæœ¬ã€‚

L<https://github.com/Util/Blue_Tiger/>

=head2 Perlito

åœ¨çº¿ç¿»è¯‘å™¨ã€‚

æœ¬é¡¹ç›®æ˜¯ä¸€å¥—Perlè·¨å¹³å°ç¼–è¯‘å™¨ï¼ŒåŒ…å«Perl5åˆ°Perl6çš„ç¿»è¯‘ï¼Œå®ƒæœ‰ä¸€ä¸ªwebå‰ç«¯ï¼Œ
æ‰€ä»¥å¯ä»¥åœ¨ä¸ å®‰è£…çš„å‰æä¸‹ä½¿ç”¨ï¼Œå®ƒç›®å‰åªæ”¯æŒ Perl5è¯­æ³•çš„ä¸€ä¸ªå­é›†ã€‚

L<http://fglock.github.io/Perlito/perlito/perlito5.html>

=head2 Perl-ToPerl6

Jeff Goffçš„å›´ç»•Perl::Criticæ¡†æ¶çš„ç”¨äºPerl5çš„æ¨¡å— Perl::ToPerl6 ï¼Œç›®æ ‡æ˜¯åœ¨
æœ€å°çš„ä¿®æ”¹å‰æä¸‹ å°†Perl5çš„ä»£ç è½¬æ¢æˆå¯ç¼–è¯‘çš„ Perl 6ä»£ç ï¼Œä»£ç çš„è½¬æ¢å™¨æ˜¯å¯é…ç½®
å’Œæ’ä»¶åŒ–çš„ï¼Œä½ å¯ä»¥é€šè¿‡å®ƒåˆ›å»ºè‡ªå·± çš„è½¬æ¢å™¨ï¼Œæ ¹æ®ä½ çš„éœ€æ±‚è‡ªå®šä¹‰å­˜åœ¨çš„è½¬æ¢å™¨ã€‚
ä½ å¯ä»¥ä»CPANä¸Šé¢è·å–æœ€æ–°çš„ç‰ˆæœ¬ï¼Œæˆ–è€…followå‘å¸ƒåœ¨GitHub çš„å·¥ç¨‹ï¼Œåœ¨çº¿è½¬æ¢å™¨
å¯èƒ½åœ¨æŸä¸€å¤©ä¼šå¯ç”¨ã€‚

=head1 Other sources of translation knowledge
=item L<https://perlgeek.de/en/article/5-to-6>
=item L<https://github.com/Util/Blue_Tiger/>
=item L<https://perl6advent.wordpress.com/2011/12/23/day-23-idiomatic-perl-6/>
=item L<http://www.perlfoundation.org/perl6/index.cgi?perl_6_delta_tablet>

=end pod

# vim: expandtab softtabstop=4 shiftwidth=4 ft=perl6
